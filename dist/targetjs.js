/*! For license information please see targetjs.js.LICENSE.txt */
!function(){"use strict";var e={d:function(t,n){for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r:function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function r(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=i(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){s=!0,o=e},f:function(){try{l||null==n.return||n.return()}finally{if(s)throw o}}}}function i(e,t){if(e){if("string"==typeof e)return a(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,l(r.key),r)}}function l(e){var t=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(t)?t:t+""}e.r(t),e.d(t,{$Dom:function(){return d},App:function(){return Xt},Bracket:function(){return Xe},BracketGenerator:function(){return Ge},ColorUtil:function(){return X},Easing:function(){return D},Moves:function(){return un},SearchUtil:function(){return ce},TModel:function(){return me},TModelUtil:function(){return q},TUtil:function(){return s},TargetData:function(){return M},TargetExecutor:function(){return H},TargetUtil:function(){return p},fetch:function(){return Kt},fetchImage:function(){return Zt},getBrowser:function(){return en},getEvents:function(){return _t},getLoader:function(){return zt},getLocationManager:function(){return Jt},getManager:function(){return Gt},getPager:function(){return qt},getResizeLastUpdate:function(){return an},getRunScheduler:function(){return Qt},getScreenHeight:function(){return nn},getScreenWidth:function(){return tn},getVisibles:function(){return rn},isRunning:function(){return $t},tApp:function(){return Nt},tRoot:function(){return Wt}});var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return t=e,l=[{key:"calcVisibility",value:function(t){var n=t.absX,r=t.absY,i=t.getDomParent(),a=t.getRealParent(),o=(i.getMeasuringScale()||1)*t.getMeasuringScale(),l=e.isDefined(t.getWidth())?o*t.getWidth():0,s=e.isDefined(t.getHeight())?o*t.getHeight():0;t.visibilityStatus||(t.visibilityStatus={});var u=t.visibilityStatus,c=t.validateVisibilityInParent()?Math.max(i.absX,a.absX):0,h=t.validateVisibilityInParent()?Math.max(i.absY,a.absY):0,d=t.validateVisibilityInParent()?Math.min(i.getWidth(),a.getWidth()):tn(),f=t.validateVisibilityInParent()?Math.min(i.getHeight(),a.getHeight()):nn();return u.right=n<=c+d,u.left=n+l>=c,u.bottom=r-t.getTopMargin()<=h+f,u.top=r+s>=h,u.parentX=c,u.parentY=h,u.parentWidth=d,u.parentHeight=f,t.val("isVisible",u.left&&u.right&&u.top&&u.bottom),t.val("isVisible")}},{key:"initDoms",value:function(t){var n=d.getAllStamped();t.forEach((function(e){e.$dom=null}));var i,a=e.list2map(t.filter((function(e){return"BI"!==e.type}))),o=r(n);try{for(o.s();!(i=o.n()).done;){var l=i.value,s=l.getAttribute("id"),u=a[s];u?u.$dom=new d("#".concat(s)):d.detach(l)}}catch(e){o.e(e)}finally{o.f()}}},{key:"contains",value:function(e,t){var n;return!(!e||!t||e!==t&&t.getDomParent()!==e&&(null===(n=t.getDomParent())||void 0===n?void 0:n.getDomParent())!==e)}},{key:"list2map",value:function(t,n){return t.reduce((function(t,r){return t[r.oid]=e.isDefined(n)?n:r,t}),{})}},{key:"getDeepList",value:function(e){var t=[];return function e(n){if(n&&n.hasChildren()){var r=n.getChildren();t.push.apply(t,function(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||i(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(r)),r.forEach(e)}}(e),t}},{key:"areEqual",value:function(e,t,n){return n?JSON.stringify(e)===JSON.stringify(t):e===t}},{key:"momentum",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.002,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:100,a=t-e,o=n<10?Math.abs(a)/10:Math.abs(a)/n,l=o/r,s=Math.pow(o,2)/(2*r);s>i&&(s=i);var u=a>0?a+s:a-s;return{distance:Math.round(u)/5,duration:Math.round(l),momentumDistance:s}}},{key:"isDefined",value:function(e){return null!=e}},{key:"isNumber",value:function(e){return"number"==typeof e&&!isNaN(e)}},{key:"limit",value:function(t,n,r){return(t=(t=e.isDefined(t)?t:n)>r?r:t)<n?n:t}},{key:"capitalizeFirstLetter",value:function(e){return e.charAt(0).toUpperCase()+e.slice(1)}},{key:"formatNum",value:function(e,t){return e?parseFloat(e.toString()).toFixed(t):0}},{key:"now",value:function(){return Date.now()}},{key:"log",value:function(e){return!0===e?console.log:function(){}}},{key:"distance",value:function(e,t,n,r){return Math.sqrt(Math.pow(n-e,2)+Math.pow(r-t,2))}},{key:"getFullLink",value:function(t){if(e.isDefined(t)){if(!t.startsWith("http")){var n=window.location.protocol;n+=n.endsWith(":")?"//":"://";var r="".concat(n).concat(window.location.hostname);t=t.startsWith("/")?r+t:"".concat(r,"/").concat(t)}return t.endsWith("/")?t.slice(0,-1):t}}},{key:"isStringBooleanOrNumber",value:function(e){var t=n(e);return"string"===t||"boolean"===t||"number"===t}},{key:"logTree",value:function(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wt(),i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=r(Jt().getChildren(n));try{for(a.s();!(t=a.n()).done;){var o=t.value,l=o.isVisible()?i+"|  ":i+"x  ";"BI"===o.type?console.log("".concat(l).concat(o.oid," v:").concat(o.isVisible()," x:").concat(Math.floor(o.getX())," y:").concat(Math.floor(o.getY()),", absY:").concat(Math.floor(o.absY)," yy:").concat(Math.floor(o.absY+o.getDomParent().absY)," w:").concat(Math.floor(o.getWidth())," h:").concat(Math.floor(o.getHeight())," hc:").concat(Math.floor(o.getContentHeight()))):console.log("".concat(l).concat(o.oid," v:").concat(o.isVisible()," x:").concat(Math.floor(o.getX())," y:").concat(Math.floor(o.getY())," absY:").concat(Math.floor(o.absY)," yy:").concat(Math.floor(o.absY+o.getDomParent().absY)," w:").concat(Math.floor(o.getWidth())," h:").concat(Math.floor(o.getHeight())," hc:").concat(Math.floor(o.getContentHeight()))),o.hasChildren()&&e.logTree(o,l)}}catch(e){a.e(e)}finally{a.f()}}}],null&&o(t.prototype,null),l&&o(t,l),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,l}();function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,h(r.key),r)}}function h(e){var t=function(e){if("object"!=u(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==u(t)?t:t+""}var d=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),"string"==typeof t?(this.selector=t,this.element=e.query(t)):t&&(this.element=t),this.childrenCount=0,this.$domParent=void 0,this.originalContent=void 0,this.textOnly=!0}return t=e,n=[{key:"cloneTemplate",value:function(){var t;return new e(null===(t=this.element.content)||void 0===t?void 0:t.cloneNode(!0).children[0])}},{key:"exists",value:function(){return this.selector&&(this.element=e.query(this.selector)),!!this.element}},{key:"contains",value:function(e){return e instanceof Node&&this.element.contains(e)}},{key:"create",value:function(e){this.element=document.createElement(e)}},{key:"getTagName",value:function(){return this.element.tagName.toLowerCase()}},{key:"setSelector",value:function(e){this.selector=e}},{key:"setId",value:function(e){this.attr("id","#"===e[0]?e.slice(1):e)}},{key:"focus",value:function(){this.element.focus()}},{key:"blur",value:function(){this.element.blur()}},{key:"attr",value:function(e,t){if(this.element)return s.isDefined(t)?void this.element.setAttribute(e,t):this.element.getAttribute(e)}},{key:"value",value:function(e){if(this.element){var t=this.element.value;return s.isDefined(e)&&(this.element.value=e),t}}},{key:"select",value:function(){this.element&&"function"==typeof this.element.select&&this.element.select()}},{key:"width",value:function(e){if(!s.isDefined(e))return this.element.offsetWidth;this.element.style.width=s.isNumber(e)?"".concat(e,"px"):e}},{key:"height",value:function(e){if(!s.isDefined(e))return this.element.offsetHeight;this.element.style.height=s.isNumber(e)?"".concat(e,"px"):e}},{key:"css",value:function(e){if(!s.isDefined(e))return this.element.className;this.element.className=e}},{key:"setStyleByMap",value:function(e){var t=this;Object.keys(e).forEach((function(n){t.style(n,e[n])}))}},{key:"style",value:function(e,t){if(2!==arguments.length)return 1===arguments.length?this.element.style[e]:this.element.style;this.element.style[e]=t}},{key:"getStyleValue",value:function(e){var t=this.style(e),n=s.isDefined(t)?t.replace(/[^-\d.]/g,""):0;return parseFloat(n)}},{key:"getBoundingClientRect",value:function(){return this.element.getBoundingClientRect()}},{key:"isXYWithinElement",value:function(e,t){var n=this.getBoundingClientRect();return e>=n.left&&e<=n.right&&t>=n.top&&t<=n.bottom}},{key:"parent",value:function(){return this.element?this.element.parentElement:null}},{key:"detach",value:function(){e.detach(this.element),this.$domParent&&this.$domParent.childrenCount>0&&this.$domParent.childrenCount--}},{key:"child",value:function(e){return this.element.children[e]}},{key:"append$Dom",value:function(e){this.element.appendChild(e.element)}},{key:"appendElement",value:function(e){this.element.appendChild(e)}},{key:"removeElement",value:function(e){this.element.removeChild(e)}},{key:"elementCount",value:function(){return this.element.children.length}},{key:"swapElements",value:function(e,t){var n=t.nextSibling;n===e?this.element.insertBefore(e,t):(this.element.insertBefore(t,e),this.element.insertBefore(e,n))}},{key:"insertFirst$Dom",value:function(e){this.element.firstChild?this.element.insertBefore(e.element,this.element.firstChild):this.append$Dom(e)}},{key:"relocate",value:function(e,t){this.element.insertBefore(e.$dom.element,this.element.children[t])}},{key:"appendTModel$Dom",value:function(e){0===this.childrenCount&&this.element.children.length>1&&e.getDomParent()&&e.getDomParent().getHtml()&&e.getDomParent().getHtml()===this.originalContent&&(this.element.innerHTML="<div>".concat(this.html(),"</div>")),this.element.appendChild(e.$dom.element),e.$dom.$domParent=this,this.childrenCount++}},{key:"deleteAll",value:function(){this.element.innerHTML=this.originalContent||"",this.childrenCount=0}},{key:"html",value:function(e){if(!s.isDefined(e))return s.isDefined(this.originalContent)?this.originalContent:this.element.innerHTML;if(this.childrenCount>0){var t=document.createElement("div");t.innerHTML=e,s.isDefined(this.originalContent)?this.element.replaceChild(t,this.element.firstChild):this.element.insertBefore(t,this.element.firstChild),this.originalContent=e,this.textOnly=!1}else this.element.innerHTML=e,this.originalContent=e,this.textOnly=!1}},{key:"text",value:function(e){if(!s.isDefined(e))return s.isDefined(this.originalContent)?this.originalContent:this.element.textContent;if(this.childrenCount>0){var t=document.createTextNode(e);s.isDefined(this.originalContent)?this.element.replaceChild(t,this.element.firstChild):this.element.insertBefore(t,this.element.firstChild),this.originalContent=e,this.textOnly=!0}else this.element.textContent=e,this.originalContent=e,this.textOnly=!0}},{key:"outerHTML",value:function(e){this.element.outerHTML=e}},{key:"isEmpty",value:function(){return""===this.element.innerHTML}},{key:"innerHTML",value:function(e){if(!s.isDefined(e))return this.element.innerHTML;this.element.innerHTML=e}},{key:"innerText",value:function(e){if(!s.isDefined(e))return this.element.innerText;this.element.innerText=e}},{key:"addClass",value:function(e){var t=this.attr("class"),n=t?t.includes(e)?t:"".concat(t," ").concat(e):e;n!==t&&this.attr("class",n)}},{key:"addEvent",value:function(e,t){this.element.addEventListener?this.element.addEventListener(e,t,{capture:!1,passive:!1}):this.element.attachEvent("on".concat(e),t)}},{key:"detachEvent",value:function(e,t){this.element.removeEventListener?this.element.removeEventListener(e,t,!1):this.element.detachEvent?this.element.detachEvent("on".concat(e),t):this.element["on".concat(e)]=null}},{key:"transform",value:function(e){this.element.style[en().style.transform]=e}},{key:"animate",value:function(e,t){return this.element.animate(e,t)}},{key:"getContext",value:function(t,n){var r=s.isDefined(n)?e.query(n):this.query("canvas");return r?r.getContext(t):void 0}},{key:"query",value:function(e){return this.element.querySelector(e)}},{key:"queryAll",value:function(e){return this.element.querySelectorAll(e)}},{key:"findFirstByClass",value:function(t){return e.findFirstByClass(t,this.element)}},{key:"findFirstByTag",value:function(t){return e.findFirstByTag(t,this.element)}},{key:"stamp",value:function(){this.attr("data-tgjs","true")}}],r=[{key:"createTemplate",value:function(t){var n=new e;return n.create("template"),n.innerHTML(t.trim()),n}},{key:"getAllStamped",value:function(){return document.querySelectorAll('[data-tgjs="true"]')}},{key:"query",value:function(t){return"#"===t[0]?e.findById(t):"."===t[0]?e.findFirstByClass(t):e.findFirstByTag(t)}},{key:"findById",value:function(e){return document.getElementById("#"===e[0]?e.slice(1):e)}},{key:"findFirstByClass",value:function(t,n){var r=e.findByClass(t,n);return r.length>0?r[0]:null}},{key:"findFirstByTag",value:function(t,n){var r=e.findByTag(t,n);return r.length>0?r[0]:null}},{key:"findByTag",value:function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:document).getElementsByTagName(e)}},{key:"findByClass",value:function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:document).getElementsByClassName("."===e[0]?e.slice(1):e)}},{key:"findNearestParentWithId",value:function(e){for(;e;){var t="function"==typeof e.getAttribute&&e.getAttribute("id")?e.getAttribute("id"):null;if(t&&Gt().visibleOidMap[t])return t;e=e.parentElement}}},{key:"detach",value:function(e){var t=s.isDefined(e)?e.parentElement:null;t&&t.removeChild(e)}},{key:"hasFocus",value:function(e){return e.hasDom()&&document.activeElement===e.$dom.element}},{key:"getWindowScrollTop",value:function(){return window.pageYOffset||document.documentElement.scrollTop||0}},{key:"getWindowScrollLeft",value:function(){return window.pageXOffset||document.documentElement.scrollLeft||0}},{key:"getScreenWidth",value:function(){return document.documentElement.clientWidth||document.body.clientWidth}},{key:"getScreenHeight",value:function(){return document.documentElement.clientHeight||document.body.clientHeight}},{key:"ready",value:function(t){new e(document).addEvent("DOMContentLoaded",t)}},{key:"ajax",value:function(e){var t=new XMLHttpRequest,n="";e.data&&(n=Object.keys(e.data).map((function(t){return"".concat(t,"=").concat(encodeURIComponent(e.data[t]))})).join("&")),t.onreadystatechange=function(){if(4===t.readyState)if(200===t.status){var n="json"===e.dataType?JSON.parse(this.responseText):this.responseText;e.success(n)}else e.error(t.status)},"POST"===e.type?(t.open(e.type,e.url,!0),t.setRequestHeader("Content-type","application/x-www-form-urlencoded"),t.send(n)):(e.url+=n?e.url>""&&e.url.indexOf("?")>=0?"&".concat(n):"?".concat(n):"",t.open(e.type,e.url,!0),t.send())}}],n&&c(t.prototype,n),r&&c(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r}();function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,y(r.key),r)}}function y(e){var t=function(e){if("object"!=f(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==f(t)?t:t+""}var g,p=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return t=e,n=[{key:"emptyValue",value:function(){return{value:void 0,step:0,steps:0,cycle:0,cycles:0,interval:0,initialValue:void 0,scheduleTimeStamp:void 0,actualValueLastUpdate:0,status:"",executionCount:0,executionFlag:!1,isImperative:!1,originalTargetName:void 0,easing:void 0,creationTime:s.now()}}},{key:"getTargetName",value:function(e){if(!e)return e;var t=e.startsWith("_")?e.slice(1):e;return t.endsWith("$$")?t.slice(0,-2):t.endsWith("$")?t.slice(0,-1):t}},{key:"bindTarget",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object.keys(t.targets),i=t.targets[n],a=r.indexOf(n),o=a>0?e.getTargetName(r[a-1]):void 0,l=a<r.length-1?r[a+1]:void 0,s=function(){if(o)return zt().isLoading(t,o)?zt().getLoadingItemValue(t,o):t.val(o)},u=void 0!==o?t.getActualValueLastUpdate(o):void 0,c=function(){return void 0!==o?t.getActualValueLastUpdate(o):void 0},h=function(){var e=c();return(void 0!==u||void 0!==e)&&(void 0===u&&void 0!==e||e!==u)},d=!(!l||!l.endsWith("$"));i.originalTargetName=e.currentTargetName,i.originalTModel=e.currentTModel;var f=e.getTargetName(n),v=function(){return t.val(f)};d&&!i.activateNextTarget&&(i.activateNextTarget=l.slice(0,-1));var y=/^on[A-Za-z]+Step$/,g=/^on[A-Za-z]+End$/,p=["value","enabledOn","onStepsEnd","onValueChange","loop","onImperativeEnd","onImperativeStep","onSuccess","onError"];Object.keys(i).forEach((function(n){if("value"===n){var r=i[n];i[n]=function(){var n;e.currentTargetName=f,e.currentTModel=t,this.key=f,this.value=v(),this.prevTargetValue=s(),this.isPrevTargetUpdated=h;var i="function"==typeof r?r.apply(this,arguments):r;return u=null!==(n=c())&&void 0!==n?n:u,i}}else if("function"==typeof i[n]&&(p.includes(n)||y.test(n)||g.test(n))){var a=i[n];i[n]=function(){var n;e.currentTargetName=f,e.currentTModel=t,this.key=f,this.value=v(),this.prevTargetValue=s(),this.isPrevTargetUpdated=h;var r="function"==typeof a?a.apply(this,arguments):a;return u=null!==(n=c())&&void 0!==n?n:u,r}}}))}},{key:"shouldActivateNextTarget",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=t.targets[n],a=null==i?void 0:i.activateNextTarget,o=e.getTargetName(a),l=null==a?void 0:a.endsWith("$"),s=null==i?void 0:i.fetchAction,u=null==i?void 0:i.childAction;if(s)if("onEnd"===s&&e.hasTargetEnded(t,n))e.activateNextTarget(t,o);else if("onEach"===s)for(;zt().isNextLoadingItemSuccessful(t,n);)t.activatedTargets.indexOf(o)>=0?t.activatedTargets.push(o):e.activateNextTarget(t,o),zt().nextActiveItem(t,n);else"inactive"===s&&e.hasTargetEnded(t,n)&&zt().removeFromTModelKeyMap(t,n);else if(u)("onEnd"===u&&e.hasTargetEnded(t,n)||"onEach"===u)&&(e.activateNextTarget(t,o),i.childAction="inactive");else if(i&&o&&!t.isTargetImperative(n))(l&&e.hasTargetEnded(t,n)||!l)&&e.activateNextTarget(t,o);else{var c=t.isTargetImperative(n)?t.targetValues[n]:i,h=c.originalTModel,d=c.originalTargetName;r<2&&d&&h&&e.hasTargetEnded(h,d)&&e.shouldActivateNextTarget(h,d,r+1)}}},{key:"hasTargetEnded",value:function(e,t){if(!(e.isTargetComplete(t)||e.isTargetDone(t)||e.isActivated())||e.hasUpdatingTargets(t))return!1;var n=e.targets[t];if(n){if(n.childAction&&(e.hasUpdatingChildren()||e.hasActiveChildren()))return!1;if(n.fetchAction&&!zt().isLoadingSuccessful(e,t))return!1}return!0}},{key:"activateNextTarget",value:function(e,t){e.targetValues[t]&&(e.targetValues[t].isImperative=!1),e.activeTargetMap[t]||e.activate(t)}},{key:"activateSingleTarget",value:function(e,t){e.targets[t]&&e.canTargetBeActivated(t)&&(e.isTargetEnabled(t)?e.activateTarget(t):e.addToActiveTargets(t))}},{key:"markTargetAction",value:function(t,n){if(t){var r=t.targets[e.currentTargetName];if("object"===f(r)){var i=r.activateNextTarget;null!=i&&i.endsWith("$")?r[n]="onEnd":r[n]=i?"onEach":"inactive"}}}},{key:"isValueStepsCycleArray",value:function(t){if(t.length>4||0===t.length)return!1;for(var n=1;n<t.length;n++)if("number"!=typeof t[n])return!1;return t.length>=2&&("number"==typeof t[0]||e.isListTarget(t[0])||"string"==typeof t[0])}},{key:"isListTarget",value:function(e){return"object"===f(e)&&null!==e&&Array.isArray(e.list)}},{key:"isObjectTarget",value:function(e,t){return"style"!==e&&"object"===f(t)&&null!==t&&!Array.isArray(t)&&Object.getPrototypeOf(t)===Object.prototype}},{key:"isChildrenTarget",value:function(e,t){return"children"===e&&"object"===f(t)}},{key:"getValueStepsCycles",value:function(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.getTargetCycle(r),a=n&&n.valueOnly,o=t.val(r),l=null,u=0,c=0,h=0;return function d(v){return Array.isArray(v)?a||!e.isValueStepsCycleArray(v)?[v,u,c,h]:Array.isArray(n)?n:(l=v[0],u=v.length>=2?v[1]:u,c=v.length>=3?v[2]:c,h=v.length>=4?v[3]:h,[l,u,c,h]):"object"===f(v)&&null!==v&&Object.getPrototypeOf(v)===Object.prototype?(l="function"==typeof v.value?v.value.call(t,i,o):s.isDefined(v.value)?v.value:v,u="function"==typeof v.steps?v.steps.call(t,i):s.isDefined(v.steps)?v.steps:0,c="function"==typeof v.interval?v.interval.call(t,i):s.isDefined(v.interval)?v.interval:0,h="function"==typeof v.cycles?v.cycles.call(t,i,t.getTargetCycles(r)):s.isDefined(v.cycles)?v.cycles:0,Array.isArray(l)?d(l):[l,u,c,h]):"function"==typeof v?d(v.call(t,i,o)):[v,u,c,h]}(n)}},{key:"getIntervalValue",value:function(e,t,n){var r="function"==typeof n?n.call(e,t):n;return s.isNumber(r)?r:0}},{key:"scheduleExecution",value:function(e,t){var n=e.getTargetInterval(t);if(n<=0)return 0;var r=s.now(),i=e.getScheduleTimeStamp(t);if(s.isDefined(i)){var a=r-i;return Math.max(n-a,0)}return e.setScheduleTimeStamp(t,r),n}},{key:"getTargetSchedulePeriod",value:function(e,t,n){var r,i=s.now(),a=0;return n>0?s.isDefined(e.getTargetTimeStamp(t))?a=(r=i-e.getTargetTimeStamp(t))<n?n-r:0:(e.setTargetTimeStamp(t,i),a=n):s.isDefined(e.getTargetTimeStamp(t))&&(a=(r=i-e.getTargetTimeStamp(t))<0?-r:0),a}},{key:"handleValueChange",value:function(e,t,n,r,i,a){"object"===f(e.targets[t])&&"function"==typeof e.targets[t].onValueChange&&!s.areEqual(n,r,e.targets[t].deepEquality)&&(e.targets[t].onValueChange.call(e,n,r,a),e.setTargetMethodName(t,"onValueChange"))}}],null&&v(t.prototype,null),n&&v(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n}();function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){S(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function T(e){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T(e)}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,E(r.key),r)}}function k(e,t,n){return t&&w(e.prototype,t),n&&w(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function S(e,t,n){return(t=E(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E(e){var t=function(e){if("object"!=T(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=T(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==T(t)?t:t+""}var M=k((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}));function C(e){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C(e)}function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,L(r.key),r)}}function L(e){var t=function(e){if("object"!=C(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=C(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==C(t)?t:t+""}g=M,S(M,"defaultTargetStyles",{position:"absolute",left:0,top:0,zIndex:1}),S(M,"transformMap",{x:!0,y:!0,z:!0,translateX:!0,translateY:!0,translateZ:!0,perspective:!0,rotate:!0,rotateX:!0,rotateY:!0,rotateZ:!0,rotate3DX:!0,rotate3DY:!0,rotate3DZ:!0,rotate3DAngle:!0,scale:!0,scaleX:!0,scaleY:!0,scaleZ:!0,scale3DX:!0,scale3DY:!0,scale3DZ:!0,skew:!0,skewX:!0,skewY:!0}),S(M,"dimMap",{width:!0,height:!0}),S(M,"styleWithUnitMap",{fontSize:!0,lineHeight:!0,borderRadius:!0,padding:!0,left:!0,top:!0,letterSpacing:!0}),S(M,"colorMap",{color:!0,background:!0,backgroundColor:!0}),S(M,"styleTargetMap",b(b(b(b(b({},g.transformMap),g.dimMap),g.styleWithUnitMap),g.colorMap),{},{opacity:!0,zIndex:!0,border:!0,borderTop:!0,borderLeft:!0,borderRight:!0,borderBottom:!0})),S(M,"asyncStyleTargetMap",{position:!0,css:!0,style:!0,textAlign:!0,boxSizing:!0,transformStyle:!0,transformOrigin:!0,attributes:!0,justifyContent:!0,alignItems:!0,display:!0,cursor:!0,fontFamily:!0,overflow:!0,overflowX:!0,overflowY:!0,textDecoration:!0,boxShadow:!0,fontWeight:!0,willChange:!0}),S(M,"scaleMap",{scale:!0,scaleX:!0,scaleY:!0,scaleZ:!0,scale3DX:!0,scale3DY:!0,scale3DZ:!0}),S(M,"rotate3D",{rotate3DX:!0,rotate3DY:!0,rotate3DZ:!0}),S(M,"attributeTargetMap",{lang:!0,autofocus:!0,placeholder:!0,autocomplete:!0,name:!0,type:!0,src:!0,href:!0,method:!0,size:!0,value:!0,maxlength:!0,minlength:!0,max:!0,min:!0,readonly:!0,required:!0,alt:!0,disabled:!0,action:!0,accept:!0,selected:!0,rows:!0,cols:!0,tabindex:!0}),S(M,"mustExecuteTargets",{width:!0,height:!0,heightFromDom:!0,widthFromDom:!0}),S(M,"coreTargetMap",{x:!0,y:!0}),S(M,"ignoreTargetMethodNameMap",b(b({},g.coreTargetMap),{},{isVisible:!0})),S(M,"cssFunctionMap",{skew:{x:0,y:0},translate3d:{x:0,y:0,z:0},rotate3d:{x:0,y:0,z:0,a:0},scale3d:{x:0,y:0,z:0}}),S(M,"bypassInitialProcessingTargetMap",{onChildrenChange:!0,onVisibleChildrenChange:!0,onPageClose:!0}),S(M,"controlTargetMap",{defaultStyling:!0,styling:!0,reuseDomDefinition:!0,useWindowFrame:!0,canDeleteDom:!0,domHolder:!0,interval:!0,onDomEvent:!0,canHaveDom:!0}),S(M,"events",{mouseStart:{pointerdown:{eventName:"mousedown",inputType:"pointer",eventType:"start",order:2,windowEvent:!1,queue:!0,rateLimit:0},mousedown:{eventName:"mousedown",inputType:"mouse",eventType:"start",order:3,windowEvent:!1,queue:!0,rateLimit:0}},mouseEnd:{pointerup:{eventName:"mouseup",inputType:"pointer",eventType:"end",order:2,windowEvent:!1,queue:!0,rateLimit:0},mouseup:{eventName:"mouseup",inputType:"mouse",eventType:"end",order:3,windowEvent:!1,queue:!0,rateLimit:0}},clickEvents:{click:{eventName:"click",inputType:"mouse",eventType:"click",order:1,windowEvent:!1,queue:!1,rateLimit:0}},touchStart:{touchstart:{eventName:"touchstart",inputType:"touch",eventType:"start",order:1,windowEvent:!1,queue:!0,rateLimit:0}},touchEnd:{touchend:{eventName:"touchend",inputType:"touch",eventType:"end",order:1,windowEvent:!1,queue:!0,rateLimit:0}},cancelEvents:{touchcancel:{eventName:"touchend",inputType:"touch",eventType:"cancel",order:1,windowEvent:!1,queue:!0,rateLimit:0},pointercancel:{eventName:"mousecancel",inputType:"pointer",eventType:"cancel",order:2,windowEvent:!1,queue:!0,rateLimit:0},mousecancel:{eventName:"mouseup",inputType:"mouse",eventType:"cancel",order:3,windowEvent:!1,queue:!0,rateLimit:0}},windowEvents:{keyup:{eventName:"key",inputType:"",eventType:"key",order:1,windowEvent:!0,queue:!0,rateLimit:50},keydown:{eventName:"key",inputType:"",eventType:"key",order:1,windowEvent:!0,queue:!0,rateLimit:50},blur:{eventName:"blur",inputType:"mouse",eventType:"cancel",order:2,windowEvent:!0,queue:!0,rateLimit:0},resize:{eventName:"resize",inputType:"",eventType:"resize",order:1,windowEvent:!0,queue:!0,rateLimit:50},orientationchange:{eventName:"resize",inputType:"",eventType:"resize",order:1,windowEvent:!0,queue:!0,rateLimit:50}},windowScroll:{scroll:{eventName:"scroll",inputType:"",eventType:"windowScroll",order:1,windowEvent:!0,queue:!0,rateLimit:50}},leaveEvents:{pointerleave:{eventName:"mouseleave",inputType:"pointer",eventType:"leave",order:2,windowEvent:!1,queue:!0,rateLimit:0},mouseleave:{eventName:"mouseleave",inputType:"mouse",eventType:"leave",order:3,windowEvent:!1,queue:!0,rateLimit:0}},enterEvents:{pointerenter:{eventName:"mouseenter",inputType:"pointer",eventType:"enter",order:2,windowEvent:!1,queue:!0,rateLimit:0},mouseenter:{eventName:"mouseenter",inputType:"mouse",eventType:"enter",order:3,windowEvent:!1,queue:!0,rateLimit:0}},moveEvents:{touchmove:{eventName:"touchmove",inputType:"touch",eventType:"move",order:1,windowEvent:!1,queue:!0,rateLimit:50},pointermove:{eventName:"mousemove",inputType:"pointer",eventType:"move",order:2,windowEvent:!1,queue:!0,rateLimit:50},mousemove:{eventName:"mousemove",inputType:"mouse",eventType:"move",order:3,windowEvent:!1,queue:!0,rateLimit:50}},documentEvents:{touchmove:{eventName:"touchmove",inputType:"touch",eventType:"move",order:1,windowEvent:!1,queue:!0,rateLimit:50},pointermove:{eventName:"mousemove",inputType:"pointer",eventType:"move",order:2,windowEvent:!1,queue:!0,rateLimit:50},mousemove:{eventName:"mousemove",inputType:"mouse",eventType:"move",order:3,windowEvent:!1,queue:!0,rateLimit:50},mouseleave:{eventName:"mouseleave",inputType:"mouse",eventType:"leave",order:3,windowEvent:!1,queue:!0,rateLimit:50},pointerup:{eventName:"mouseup",inputType:"pointer",eventType:"end",order:2,windowEvent:!1,queue:!0,rateLimit:0},mouseup:{eventName:"mouseup",inputType:"mouse",eventType:"end",order:3,windowEvent:!1,queue:!0,rateLimit:0},touchend:{eventName:"touchend",inputType:"touch",eventType:"end",order:1,windowEvent:!1,queue:!0,rateLimit:0}},wheelEvents:{wheel:{eventName:"wheel",inputType:"",eventType:"wheel",order:1,windowEvent:!1,queue:!0,rateLimit:50},mousewheel:{eventName:"wheel",inputType:"",eventType:"wheel",order:1,windowEvent:!1,queue:!0,rateLimit:50}}}),S(M,"targetToEventsMapping",{onStart:["touchStart","mouseStart"],onEnd:[],onKey:[],onClick:["clickEvents","touchStart","mouseStart"],onAnyClick:["clickEvents","touchStart","mouseStart"],onHover:["moveEvents"],onSwipe:["touchStart","mouseStart"],onAnySwipe:["touchStart","mouseStart"],onPinch:["touchStart"],onEnter:["enterEvents"],onLeave:["leaveEvents"],onScroll:["touchStart","mouseStart","wheelEvents"],onScrollLeft:["touchStart","mouseStart","wheelEvents"],onScrollTop:["touchStart","mouseStart","wheelEvents"],onWindowScroll:["windowScroll"]}),S(M,"touchEventMap",{onStart:function(e){return _t().isStartEvent()&&_t().isStartHandler(e)},onEnd:function(e){return _t().isEndEvent()&&_t().isEndHandler(e)},onAnySwipe:function(){return _t().isSwipeEvent()},onHover:function(e){return _t().isMoveEvent()&&_t().isHoverHandler(e)},onClick:function(e){return _t().isClickEvent()&&_t().isClickHandler(e)},onAnyClick:function(){return _t().isClickEvent()},onEnter:function(e){return _t().isEnterHandler(e)},onLeave:function(e){return _t().isLeaveHandler(e)},onSwipe:function(e){return _t().isSwipeHandler(e)&&_t().isSwipeEvent()}}),S(M,"internalEventMap",{onDomEvent:function(e){return e.hasDomNow},onVisible:function(e){return e.isNowVisible},onResize:function(e){var t=e.getDimLastUpdate(),n=e.getParent(),r=n?Math.max(n.getDimLastUpdate(),an()):an();return t>0&&r>t}}),S(M,"allEventMap",b(b({},g.touchEventMap),{},{onFocus:function(e){return _t().onFocus(e)},onBlur:function(e){return _t().onBlur(e)},onPinch:function(e){return _t().isPinchHandler(e)},onKey:function(){return"key"===_t().getEventType()&&_t().currentKey},onScroll:function(e){return _t().isScrollLeftHandler(e)&&_t().deltaX()||_t().isScrollTopHandler(e)&&_t().deltaY()},onScrollTop:function(e){return"horizontal"!==_t().getOrientation()&&_t().isScrollTopHandler(e)&&_t().deltaY()},onScrollLeft:function(e){return"vertical"!==_t().getOrientation()&&_t().isScrollLeftHandler(e)&&_t().deltaX()},onWindowScroll:function(){return"windowScroll"===_t().getEventType()}}));var D=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},t=[{key:"linear",value:function(e){return e}},{key:"inQuad",value:function(e){return e*e}},{key:"outQuad",value:function(e){return e*(2-e)}},{key:"outExpo",value:function(e){return 1-(1-e)*(1-e)}},{key:"circular",value:function(e){return Math.sqrt(1- --e*e)}},{key:"inOutQuad",value:function(e){return e<.5?2*e*e:(4-2*e)*e-1}},{key:"inOut",value:function(e){return e<.5?2*e*e:(4-2*e)*e-1}},{key:"outElastic",value:function(e){var t=2*Math.PI/3;return 0===e?0:1===e?1:Math.pow(2,-10*e)*Math.sin((10*e-.75)*t)+1}}],null&&x(e.prototype,null),t&&x(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function P(e){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P(e)}function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){A(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function A(e,t,n){return(t=V(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,V(r.key),r)}}function V(e){var t=function(e){if("object"!=P(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=P(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==P(t)?t:t+""}var H=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return t=e,n=[{key:"executeDeclarativeTarget",value:function(t,n,r){e.resolveTargetValue(t,n,r),e.updateTarget(t,t.targetValues[n],n),p.shouldActivateNextTarget(t,n)}},{key:"executeImperativeTarget",value:function(t,n,r,i,a,o,l,u){t.targetValues[n]=t.targetValues[n]||p.emptyValue();var c=t.targetValues[n];if(c.isImperative=!0,c.originalTargetName=l,c.originalTModel=u,p.isListTarget(r))e.assignListTarget(c,r.list,r.list[0],i,a,o);else if(p.isObjectTarget(n,r)){var h=M.cssFunctionMap[n]?j(j({},M.cssFunctionMap[n]),r):r;Object.keys(h).forEach((function(r){var c=h[r];if("object"===P(c)&&!p.isListTarget(c)){var d=p.getValueStepsCycles(t,h[r],n);c=d[0],i=s.isDefined(d[1])?d[1]:i,a=s.isDefined(d[2])?d[2]:a}e.executeImperativeTarget(t,r,c,i,a,o,l,u)}))}else if("object"!==P(r)||p.isListTarget(r))e.assignSingleTarget(c,r,void 0,i,0,a,o),c.step=0;else{var d=p.getValueStepsCycles(t,r,n);r!==d[0]?(r=d[0],i=s.isDefined(d[1])?d[1]:i,a=s.isDefined(d[2])?d[2]:a,e.executeImperativeTarget(t,n,r,i,a,o,l,u)):(e.assignSingleTarget(c,r,void 0,i,0,a,o),c.step=0)}e.updateTarget(t,c,n)}},{key:"updateTarget",value:function(t,n,r){n.executionCount++,n.executionFlag=!0,t.setActualValueLastUpdate(r),0===t.getTargetSteps(r)&&e.snapActualToTarget(t,r),t.addToStyleTargetList(r),t.setTargetMethodName(r,"value"),t.updateTargetStatus(r)}},{key:"assignListTarget",value:function(e,t,n,r,i,a){e.valueList=t,e.stepList=Array.isArray(r)?r:s.isDefined(r)?[r]:[1],e.intervalList=Array.isArray(i)?i:s.isDefined(i)?[i]:[0],e.easingList=Array.isArray(a)?a:s.isDefined(a)?[a]:[D.linear],e.cycle=1,e.value=t[1],e.initialValue=n,e.steps=e.stepList[0],e.interval=e.intervalList[0],e.easing=e.easingList[0],e.step=0,e.cycles=0}},{key:"executeEventHandlerTarget",value:function(e){"string"==typeof e?_t().attachGroupEvent(e):Array.isArray(e)&&e.forEach((function(e){return _t().attachGroupEvent(e)}))}},{key:"assignSingleTarget",value:function(e,t,n,r,i,a,o){delete e.valueList,delete e.stepList,delete e.intervalList,delete e.easingList,e.initialValue=n,e.value=t,e.steps=r||0,e.cycles=i||0,e.interval=a||0,e.easing=o}},{key:"snapActualToTarget",value:function(e,t){var n=e.val(t),r=e.targetValues[t].value;e.val(t,"function"==typeof r?r.call(e):r),p.handleValueChange(e,t,e.val(t),n,0,0)}},{key:"resolveTargetValue",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.getTargetCycle(n),i=!t.targetValues[n]&&s.isDefined(t.targets[n].initialValue)?t.targets[n].initialValue:void 0,a=p.getValueStepsCycles(t,t.targets[n],n,r),o=a[0],l=a[1]||0,u=a[2]||0,c=a[3]||0,h=t.targetValues[n]||p.emptyValue();t.targetValues[n]=h;var d=s.isDefined(t.targets[n].easing)?t.targets[n].easing:void 0;if(p.isChildrenTarget(n,o)){var f=(Array.isArray(o)?o:[o]).map((function(e){return t.addChild(e),t.addedChildren.at(-1).child}));e.assignSingleTarget(h,Array.isArray(o)?f:f[0],void 0,0,c,u)}else if(p.isListTarget(o))e.assignListTarget(h,o.list,o.list[0],l,u,d);else{var v,y;l>0&&!s.areEqual(t.val(n),o,null!==(v=null===(y=t.targets[n])||void 0===y?void 0:y.deepEquality)&&void 0!==v&&v)&&t.resetTargetStep(n),e.assignSingleTarget(h,o,i,l,c,u,d)}}}],null&&I(t.prototype,null),n&&I(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n}();function N(e){return N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},N(e)}function F(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,R(r.key),r)}}function R(e){var t=function(e){if("object"!=N(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=N(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==N(t)?t:t+""}var Y,U,B,X=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return t=e,n=[{key:"color2Integers",value:function(t){if(t=t?String(t):"",t=e.colors[t.toLowerCase()]||t){if(t.startsWith("#")){t=3===(t=t.slice(1)).length?t.split("").map((function(e){return e+e})).join(""):t;var n=parseInt(t,16);return[n>>16&255,n>>8&255,255&n]}var r=t.match(/\d+/g);return r&&3===r.length?r.map(Number):void 0}}}],null&&F(t.prototype,null),n&&F(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n}();function $(e){return $="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$(e)}function W(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_(r.key),r)}}function _(e){var t=function(e){if("object"!=$(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=$(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==$(t)?t:t+""}Y=X,B={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},(U=R(U="colors"))in Y?Object.defineProperty(Y,U,{value:B,enumerable:!0,configurable:!0,writable:!0}):Y[U]=B;var q=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return function(e,t,n){return n&&W(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(e,0,[{key:"defaultActualValues",value:function(){return{x:0,y:0,width:0,height:0,leftMargin:0,rightMargin:0,topMargin:0,bottomMargin:0,opacity:1,scale:1,scrollLeft:0,scrollTop:0,textOnly:!0,borderRadius:0,children:[],isInFlow:!0,baseElement:"div",canHaveDom:!0,widthFromDom:!1,heightFromDom:!1,isIncluded:!0,bracketThreshold:10,bracketSize:5,preventDefault:void 0,canDeleteDom:void 0}}},{key:"shouldMeasureHeightFromDom",value:function(e){return!e.excludeDefaultStyling()&&!s.isDefined(e.targetValues.height)&&!s.isDefined(e.targets.height)&&!e.hasChildren()||!!e.getTargetValue("heightFromDom")}},{key:"shouldMeasureWidthFromDom",value:function(e){return!((e.excludeDefaultStyling()||e.reuseDomDefinition()||s.isDefined(e.targetValues.width)||s.isDefined(e.targets.width)||e.hasChildren())&&!e.getTargetValue("widthFromDom"))}},{key:"createDom",value:function(t){t.$dom=new d,t.$dom.create(t.getBaseElement()),t.$dom.setSelector("#".concat(t.oid)),t.$dom.setId(t.oid),t.$dom.stamp(),t.isTextOnly()?t.$dom.text(t.getHtml()):t.$dom.html(t.getHtml()),t.setActualValueLastUpdate("html"),t.domHeightTimestamp=0,t.domWidthTimestamp=0,t.transformMap={},t.styleMap={},t.allStyleTargetList.forEach((function(e){s.isDefined(t.val(e))&&t.addToStyleTargetList(e)})),e.fixStyle(t),e.fixAsyncStyle(t)}},{key:"getTransformValue",value:function(e,t){var n;return"x"===t?n=e.getTransformX():"y"===t?n=e.getTransformY():M.transformMap[t]&&(n=M.rotate3D[t]?e.val(t):M.scaleMap[t]?s.formatNum(e.val(t),2):e.floorVal(t)),n}},{key:"fixStyle",value:function(t){var n=!1;t.styleTargetList.forEach((function(r){if(M.transformMap[r]){var i=e.getTransformValue(t,r);t.transformMap[r]!==i&&(t.transformMap[r]=i,n=!0)}else if("width"===r){var a=Math.floor(t.getWidth());t.$dom.getStyleValue("width")!==a&&(t.styleMap.width=a,t.$dom.width(a))}else if("height"===r){var o=Math.floor(t.getHeight());t.$dom.getStyleValue("height")!==o&&(t.styleMap.height=o,t.$dom.height(o))}else M.styleWithUnitMap[r]?s.isDefined(t.val(r))&&t.styleMap[r]!==t.val(r)&&(t.$dom.style(r,s.isNumber(t.val(r))?"".concat(t.val(r),"px"):t.val(r)),t.styleMap[r]=t.val(r)):s.isDefined(t.val(r))&&t.styleMap[r]!==t.val(r)&&(t.$dom.style(r,"".concat(t.val(r))),t.styleMap[r]=t.val(r))})),n&&t.$dom.transform(e.getTransformString(t)),t.styleTargetMap={},t.styleTargetList.length=0}},{key:"setWidthFromDom",value:function(e){var t=e.domWidthTimestamp,n=e.getParent(),r=e.getDomParent(),i=!1;if(Gt().needsRerender(e)&&(e.isTextOnly()?e.$dom.text(e.getHtml()):e.$dom.html(e.getHtml()),i=!0),i||n&&t<=n.getDimLastUpdate()||r&&t<=r.getDimLastUpdate()){e.$dom.width("auto");var a=e.$dom.width();e.domWidthTimestamp=s.now(),e.val("width",a),(a>0||0===a&&e.lastVal("width")>0)&&e.addToStyleTargetList("width"),Qt().schedule(15,"resize")}}},{key:"setHeightFromDom",value:function(e){var t=e.domHeightTimestamp,n=e.getParent(),r=e.getDomParent(),i=!1;if(Gt().needsRerender(e)&&(e.isTextOnly()?e.$dom.text(e.getHtml()):e.$dom.html(e.getHtml()),i=!0),i||n&&t<=n.getDimLastUpdate()||r&&t<=r.getDimLastUpdate()){e.$dom.height("auto");var a=e.$dom.height();e.domHeightTimestamp=s.now(),e.val("height",a),(a>0||0===a&&e.lastVal("height")>0)&&e.addToStyleTargetList("height"),Qt().schedule(15,"resize")}}},{key:"morph",value:function(e,t,n,r,i){var a=e.getTargetEasing(t),o=a?a(e.getTargetStepPercent(t,i)):e.getTargetStepPercent(t,i);if(M.colorMap[t]){var l=X.color2Integers(r),s=n?X.color2Integers(n):X.color2Integers("#fff");if(l&&s){var u=Math.floor(l[0]*o+s[0]*(1-o)),c=Math.floor(l[1]*o+s[1]*(1-o)),h=Math.floor(l[2]*o+s[2]*(1-o));return"rgb(".concat(u,",").concat(c,",").concat(h,")")}return r}return"number"==typeof r?r*o+n*(1-o):r}},{key:"fixAsyncStyle",value:function(e){e.asyncStyleTargetList.forEach((function(t){if("style"===t){var n=e.getStyle();s.isDefined(n)&&e.styleMap.style!==n&&(e.$dom.setStyleByMap(e.getStyle()),e.styleMap.style=n)}else if("attributes"===t){var r=e.getAttributes();s.isDefined(r)&&e.styleMap.attributes!==r&&(Object.keys(r).forEach((function(t){e.$dom.attr(t,r[t])})),e.styleMap.attributes=r)}else if("css"===t){var i=e.getCss();e.$dom.css()!==i&&e.$dom.css(i)}else M.attributeTargetMap[t]?e.$dom.attr(t,e.val(t)):s.isDefined(e.val(t))&&e.styleMap[t]!==e.val(t)&&(e.$dom.style(t,"".concat(e.val(t))),e.styleMap[t]=e.val(t))})),e.asyncStyleTargetMap={},e.asyncStyleTargetList.length=0}},{key:"getTransformString",value:function(t){var n={},r={};(t.transformMap.translateX||t.transformMap.translateY||t.transformMap.translateZ)&&(delete t.transformMap.x,delete t.transformMap.y);for(var i=0,a=Object.keys(t.transformMap);i<a.length;i++){var o=a[i];if(!n[o])switch(o){case"translateX":case"translateY":case"translateZ":r[o]="".concat(o,"(").concat(t.transformMap[o],"px)"),n[o]=!0;break;case"x":case"y":case"z":s.isDefined(t.getZ())?r.translate3d="translate3d(".concat(t.transformMap.x,"px, ").concat(t.transformMap.y,"px, ").concat(t.transformMap.z,"px)"):(s.isDefined(t.getX())||s.isDefined(t.getY()))&&(r.translate="translate(".concat(t.transformMap.x,"px, ").concat(t.transformMap.y,"px)")),n.x=!0,n.y=!0,n.z=!0;break;case"rotate":case"rotateX":case"rotateY":case"rotateZ":case"rotate3DX":case"rotate3DY":case"rotate3DZ":case"rotate3DAngle":s.isDefined(t.val("rotate3DX"))&&s.isDefined(t.val("rotate3DY"))&&s.isDefined(t.val("rotate3DZ"))&&s.isDefined(t.val("rotate3DAngle"))?(r.rotate3d="rotate3d(".concat(t.transformMap.rotate3DX,", ").concat(t.transformMap.rotate3DY,", ").concat(t.transformMap.rotate3DZ,", ").concat(t.transformMap.rotate3DAngle,"deg)"),n.rotate3DX=!0,n.rotate3DY=!0,n.rotate3DZ=!0,n.rotate3DAngle=!0):s.isDefined(t.val(o))&&(r[o]="".concat(o,"(").concat(t.transformMap[o],"deg)"),n[o]=!0);break;case"scale":case"scaleX":case"scaleY":case"scaleZ":case"scale3DX":case"scale3DY":case"scale3DZ":s.isDefined(t.val("scale3DX"))&&s.isDefined(t.val("scale3DY"))&&s.isDefined(t.val("scale3DZ"))?(r.scale3d="scale3d(".concat(t.transformMap.scale3DX,", ").concat(t.transformMap.scale3DY,", ").concat(t.transformMap.scale3DZ,")"),n.scale3DX=!0,n.scale3DY=!0,n.scale3DZ=!0):s.isDefined(t.val(o))&&(r[o]="".concat(o,"(").concat(t.transformMap[o],")"),n[o]=!0);break;case"skewX":case"skewY":s.isDefined(t.val("skewX"))&&s.isDefined(t.val("skewY"))?(r[o]="skew(".concat(t.transformMap.skewX,"deg, ").concat(t.transformMap.skewY,"deg)"),n.skewX=!0,n.skewY=!0):s.isDefined(t.val(o))&&(r[o]="".concat(o,"(").concat(t.transformMap[o],"deg)"),n[o]=!0);break;case"perspective":s.isDefined(t.val("perspective"))&&(r[o]="perspective(".concat(t.transformMap.perspective,"px)"),n.perspective=!0)}}var l={};t.val("transformOrder")?t.val("transformOrder").forEach((function(e,t){l[e]=t})):l=e.transformOrder;var u=Object.keys(r).sort((function(e,t){return l[e]-l[t]})).map((function(e){return r[e]}));return u.join(" ")}}])}();function z(e,t){if(e){if("string"==typeof e)return K(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?K(e,t):void 0}}function K(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Z(e){return Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Z(e)}function G(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Q(r.key),r)}}function Q(e){var t=function(e){if("object"!=Z(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Z(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Z(t)?t:t+""}!function(e,t,n){(t=_(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(q,"transformOrder",{perspective:0,translateX:1,translateY:1,translateZ:1,translate:1,translate3d:1,rotate:2,rotateX:2,rotateY:2,rotateZ:2,rotate3d:2,skew:3,skewX:3,skewY:3,scale:4,scaleX:4,scaleY:4,scaleZ:4,scale3DX:4,scale3DY:4,scale3DZ:4});var J=function(){return function(e,t){return t&&G(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),"object"===Z(t)&&void 0===n&&(n=t,t=""),this.type=t||"blank",this.targets=Object.assign({},n);var r=Xt.getOid(this.type);this.oid=r.oid,this.oidNum=r.num,this.targetValues={},this.actualValues={},this.lastActualValues={},this.activeTargetList=[],this.activeTargetMap={},this.updatingTargetList=[],this.updatingTargetMap={},this.updatingChildrenList=[],this.updatingChildrenMap={},this.activeChildrenList=[],this.activeChildrenMap={},this.externalEventList=[],this.externalEventMap={},this.internalEventList=[],this.internalEventMap={},this.coreTargets=[],this.allStyleTargetList=[],this.allStyleTargetMap={},this.styleTargetList=[],this.styleTargetMap={},this.asyncStyleTargetList=[],this.asyncStyleTargetMap={},this.activatedTargets=[],this.targetExecutionCount=0,this.parent=null,this.targetMethodMap={}}),[{key:"getParent",value:function(){return this.parent}},{key:"initTargets",value:function(){var e=this;this.actualValues=q.defaultActualValues(),this.targetValues={},this.activeTargetMap={},this.activeTargetList=[],this.originalTargetNames=Object.keys(this.targets);var t=d.query("#".concat(this.oid));t||this.excludeDefaultStyling()?t&&!s.isDefined(this.targets.reuseDomDefinition)&&(this.targets.reuseDomDefinition=!0,this.targets.excludeX=!0,this.targets.excludeY=!0,this.targets.position="relative"):Object.entries(M.defaultTargetStyles).forEach((function(t){var n=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,l=[],s=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){u=!0,i=e}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}(e,t)||z(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(t,2),r=n[0],i=n[1];r in e.targets||(e.targets[r]=i)})),Object.keys(this.targets).forEach((function(t){e.processNewTarget(t)}))}},{key:"processNewTarget",value:function(e){var t=this.targets[e],n=p.getTargetName(e);if(s.isDefined(t)){M.controlTargetMap[e]||(("object"!==Z(t)||Array.isArray(t))&&(this.targets[e]={value:t},t=this.targets[e]),p.bindTarget(this,e,this.originalTargetNames)),M.allEventMap[n]&&(this.externalEventMap[n]||(this.externalEventList.push(n),this.externalEventMap[n]=!0,t.active=!1)),M.internalEventMap[n]&&(this.internalEventMap[n]||(this.internalEventList.push(n),this.internalEventMap[n]=!0,t.active=!1));var r=e.startsWith("_");n!==e&&(this.targets[n]=this.targets[e],r&&(this.targets[n].active=!1),delete this.targets[e],e=n),M.bypassInitialProcessingTargetMap[e]||(s.isDefined(t.initialValue)&&this.val(e,t.initialValue),this.addToStyleTargetList(e),M.coreTargetMap[e]&&!this.coreTargets.includes(e)&&this.coreTargets.push(e),M.mustExecuteTargets[e]||!s.isStringBooleanOrNumber(t)?!1!==t.active&&this.canTargetBeActivated(e)&&this.addToActiveTargets(e):this.val(e,t))}else this.delVal("key")}},{key:"activate",value:function(e){Jt().addToActivatedList(this),this.currentStatus="active",e&&this.isTargetEnabled(e)&&-1===this.activatedTargets.indexOf(e)&&this.activatedTargets.push(e)}},{key:"isActivated",value:function(){return"active"===this.currentStatus}},{key:"deactivate",value:function(){this.currentStatus=void 0}},{key:"shouldExecuteCyclesInParallel",value:function(e){var t;return!0===(null===(t=this.targets[e])||void 0===t?void 0:t.parallel)}},{key:"canTargetBeActivated",value:function(e){return!(Array.isArray(this.targets.onDomEvent)&&this.targets.onDomEvent.includes(e)&&!this.hasDom())}},{key:"addToStyleTargetList",value:function(e){if(!this.excludeStyling()&&!this.targets["exclude".concat(s.capitalizeFirstLetter(e))]){var t=M.asyncStyleTargetMap[e],n=M.attributeTargetMap[e];if(t||n)this.asyncStyleTargetMap[e]||(this.asyncStyleTargetList.push(e),this.asyncStyleTargetMap[e]=!0);else if(this.isStyleTarget(e)){var r=!0;if(M.transformMap[e])this.getParent()&&this.calcAbsolutePosition(this.getX(),this.getY()),q.getTransformValue(this,e)===this.transformMap[e]&&(r=!1);else if("width"===e||"height"===e){var i=Math.floor("width"===e?this.getWidth():this.getHeight());this.styleMap[e]===i&&(r=!1)}else s.isDefined(this.val(e))&&this.styleMap[e]===this.val(e)&&(r=!1);r&&!this.styleTargetMap[e]&&(this.styleTargetList.push(e),this.styleTargetMap[e]=!0)}else{if(!this.useWindowFrame(e)||this.styleTargetMap[e])return;this.styleTargetList.push(e),this.styleTargetMap[e]=!0}this.allStyleTargetMap[e]||(this.allStyleTargetList.push(e),this.allStyleTargetMap[e]=!0)}}},{key:"isStyleTarget",value:function(e){return M.styleTargetMap[e]}},{key:"useWindowFrame",value:function(e){return Array.isArray(this.targets.useWindowFrame)&&this.targets.useWindowFrame.includes(e)}},{key:"removeTarget",value:function(e){delete this.targets[e],this.removeFromActiveTargets(e),this.removeFromUpdatingTargets(e),delete this.targetValues[e]}},{key:"addTarget",value:function(e,t){this.addTargets(function(e,t,n){return(t=Q(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},e,t))}},{key:"addTargets",value:function(e){var t=this;Object.keys(e).forEach((function(n){t.targets[n]=e[n],t.removeFromUpdatingTargets(n),t.processNewTarget(n)})),Qt().schedule(1,"addTargets-"+this.oid)}},{key:"getTargetStepPercent",value:function(e,t){var n=this.getTargetSteps(e);return t=s.isDefined(t)?t:this.getTargetStep(e),n?t/n:1}},{key:"resetTargetStep",value:function(e){return this.targetValues[e]&&(this.targetValues[e].step=0),this}},{key:"resetTargetExecutionFlag",value:function(e){return this.targetValues[e]&&(this.targetValues[e].executionFlag=!1),this}},{key:"resetTargetCycle",value:function(e){return this.targetValues[e]&&(this.targetValues[e].cycle=0),this}},{key:"resetScheduleTimeStamp",value:function(e){return this.targetValues[e]&&(this.targetValues[e].scheduleTimeStamp=void 0),this}},{key:"resetTargetInitialValue",value:function(e){return this.targetValues[e]&&(this.targetValues[e].initialValue=void 0),this}},{key:"updateTargetStatus",value:function(e){var t=this.targetValues[e];if(t){var n=this.getTargetCycle(e),r=this.getTargetCycles(e),i=this.getTargetStep(e),a=this.getTargetSteps(e);return this.isExecuted(e)&&i<a||Array.isArray(t.valueList)&&n<t.valueList.length-1?this.targetValues[e].status="updating":!this.isExecuted(e)||this.isTargetInLoop(e)||n<r?this.targetValues[e].status="active":this.targetValues[e].status="done",this.isTargetUpdating(e)?(this.addToUpdatingTargets(e),this.removeFromActiveTargets(e)):this.isTargetActive(e)?(this.addToActiveTargets(e),this.removeFromUpdatingTargets(e)):(this.removeFromActiveTargets(e),this.removeFromUpdatingTargets(e),Nt.manager.doneTargets.push({tmodel:this,key:e})),this.targetValues[e].status}}},{key:"getTargetStatus",value:function(e){return this.targetValues[e]?this.targetValues[e].status:""}},{key:"isTargetActive",value:function(e){return this.targetValues[e]&&"active"===this.targetValues[e].status}},{key:"isTargetUpdating",value:function(e){return this.targetValues[e]&&"updating"===this.targetValues[e].status}},{key:"isTargetDone",value:function(e){return this.targetValues[e]&&"done"===this.targetValues[e].status}},{key:"isTargetComplete",value:function(e){return this.targetValues[e]&&"complete"===this.targetValues[e].status}},{key:"isExecuted",value:function(e){return this.targetValues[e]&&this.targetValues[e].executionFlag}},{key:"neverExecuted",value:function(e){return!this.targetValues[e]}},{key:"isTargetImperative",value:function(e){return!!this.targetValues[e]&&this.targetValues[e].isImperative}},{key:"getTargetExecutionCount",value:function(e){return this.targetValues[e]?this.targetValues[e].executionCount:0}},{key:"setTargetComplete",value:function(e){this.targetValues[e]&&(this.targetValues[e].status="complete")}},{key:"isTargetEnabled",value:function(e){var t=this.targets[e];return!!s.isDefined(t)&&("function"!=typeof t.enabledOn||(this.setTargetMethodName(e,"enabledOn"),t.enabledOn.call(this)))}},{key:"isTargetInLoop",value:function(e){return!!this.targets[e]&&("function"==typeof this.targets[e].loop?this.targets[e].loop.call(this,e):this.targets[e].loop)}},{key:"doesTargetEqualActual",value:function(e){if(this.targetValues[e]){var t=!!this.targets[e]&&this.targets[e].deepEquality;return t?s.areEqual(this.getTargetValue(e),this.val(e),t):this.getTargetValue(e)===this.val(e)}return!1}},{key:"getTargetValue",value:function(e){return this.targetValues[e]?"function"==typeof this.targetValues[e].value?this.targetValues[e].value.call(this):this.targetValues[e].value:void 0}},{key:"getTargetSteps",value:function(e){return this.targetValues[e]&&this.targetValues[e].steps||0}},{key:"getTargetStep",value:function(e){return this.targetValues[e]?this.targetValues[e].step:0}},{key:"getScheduleTimeStamp",value:function(e){return this.targetValues[e]?this.targetValues[e].scheduleTimeStamp:void 0}},{key:"isScheduledPending",value:function(e){var t=this.getScheduleTimeStamp(e),n=this.getTargetInterval(e);return t&&t+n>s.now()}},{key:"shouldScheduleRun",value:function(e){var t,n;return null===(t=null===(n=this.targets[e])||void 0===n?void 0:n.triggerRerun)||void 0===t||t}},{key:"getTargetInitialValue",value:function(e){var t;return null===(t=this.targetValues[e])||void 0===t?void 0:t.initialValue}},{key:"getActualValueLastUpdate",value:function(e){var t;return null===(t=this.targetValues[e])||void 0===t?void 0:t.actualValueLastUpdate}},{key:"getDimLastUpdate",value:function(){return Math.max(this.getActualValueLastUpdate("width")||0,this.getActualValueLastUpdate("height")||0,this.domHeightTimestamp,this.domWidthTimestamp)}},{key:"getTargetCreationTime",value:function(e){return this.targetValues[e]?this.targetValues[e].creationTime:void 0}},{key:"incrementTargetStep",value:function(e,t,n,r,i){var a=this.targetValues[e];if(a){var o=r||8,l=t-n,s=Math.max(1,Math.floor(l/o));return a.step=Math.min(i,a.step+s),a.step}}},{key:"getTargetCycles",value:function(e){return this.targetValues[e]&&this.targetValues[e].cycles||0}},{key:"getTargetCycle",value:function(e){return this.targetValues[e]?this.targetValues[e].cycle:0}},{key:"incrementTargetCycle",value:function(e){return this.targetValues[e]&&this.targetValues[e].cycle++,this.targetValues[e].cycle}},{key:"setTargetInterval",value:function(e,t){return this.targetValues[e]&&(this.targetValues[e].interval=t),this.targetValues[e].interval}},{key:"setScheduleTimeStamp",value:function(e,t){this.targetValues[e]&&(this.targetValues[e].scheduleTimeStamp=t)}},{key:"setTargetInitialValue",value:function(e,t){this.targetValues[e]&&(this.targetValues[e].initialValue=t)}},{key:"setActualValueLastUpdate",value:function(e){this.targetValues[e]&&(this.targetValues[e].actualValueLastUpdate=s.now())}},{key:"getTargetEasing",value:function(e){return"function"==typeof this.targetValues[e].easing?this.targetValues[e].easing:void 0}},{key:"getTargetInterval",value:function(e){var t=this.targetValues[e];return(null==t?void 0:t.interval)||0}},{key:"setTarget",value:function(e,t,n,r,i){if("object"===Z(e)&&null!==e){var a=[e,t,n,r,i];t=a[0],n=a[1],r=a[2],i=a[3],e=""}var o=p.currentTargetName,l=p.currentTModel;return this.getParent()===l&&p.markTargetAction(l,"childAction"),H.executeImperativeTarget(this,e,t,n,r,i,o,l),this}},{key:"hasTargetUpdates",value:function(e){return e?!0===this.updatingTargetMap[e]:this.updatingTargetList.length>0}},{key:"addToActiveTargets",value:function(e){var t=this;if(!this.activeTargetMap[e]&&this.canTargetBeActivated(e)){var n;this.activeTargetMap[e]=!0;var r=["y","x","height","width","start"];-1!==r.indexOf(e)?(this.activeTargetList=this.activeTargetList.filter((function(e){return!r.includes(e)})),r.forEach((function(e){t.activeTargetMap[e]&&t.activeTargetList.unshift(e)}))):this.activeTargetList.push(e),null===(n=this.getParent())||void 0===n||n.addToActiveChildren(this)}}},{key:"removeFromActiveTargets",value:function(e){if(this.activeTargetMap[e]){delete this.activeTargetMap[e];var t,n=this.activeTargetList.indexOf(e);n>=0&&this.activeTargetList.splice(n,1),0===this.activeTargetList.length&&(null===(t=this.getParent())||void 0===t||t.removeFromActiveChildren(this))}}},{key:"addToUpdatingTargets",value:function(e){var t;this.updatingTargetMap[e]||(this.updatingTargetMap[e]=!0,this.updatingTargetList.push(e),null===(t=this.getParent())||void 0===t||t.addToUpdatingChildren(this))}},{key:"removeFromUpdatingTargets",value:function(e){if(this.updatingTargetMap[e]){delete this.updatingTargetMap[e];var t,n=this.updatingTargetList.indexOf(e);n>=0&&this.updatingTargetList.splice(n,1),0===this.updatingTargetList.length&&(null===(t=this.getParent())||void 0===t||t.removeFromUpdatingChildren(this))}}},{key:"hasUpdatingTargets",value:function(e){var t,n=function(e){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=z(e))){t&&(e=t);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,o=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return a=e.done,e},e:function(e){o=!0,i=e},f:function(){try{a||null==t.return||t.return()}finally{if(o)throw i}}}}(this.updatingTargetList);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.isTargetImperative(r)&&this.targetValues[r].originalTargetName===e)return!0}}catch(e){n.e(e)}finally{n.f()}return!1}},{key:"addToUpdatingChildren",value:function(e){this.updatingChildrenMap[e.oid]||(this.updatingChildrenMap[e.oid]=!0,this.updatingChildrenList.push(e))}},{key:"removeFromUpdatingChildren",value:function(e){if(this.updatingChildrenMap[e.oid]){delete this.updatingChildrenMap[e.oid];var t=this.updatingChildrenList.indexOf(e);t>=0&&this.updatingChildrenList.splice(t,1)}}},{key:"hasUpdatingChildren",value:function(){return this.updatingChildrenList.length>0}},{key:"addToActiveChildren",value:function(e){this.activeChildrenMap[e.oid]||(this.activeChildrenMap[e.oid]=!0,this.activeChildrenList.push(e))}},{key:"removeFromActiveChildren",value:function(e){if(this.activeChildrenMap[e.oid]){delete this.activeChildrenMap[e.oid];var t=this.activeChildrenList.indexOf(e);t>=0&&this.activeChildrenList.splice(t,1)}}},{key:"hasActiveChildren",value:function(){return this.activeChildrenList.length>0}},{key:"deleteTargetValue",value:function(e){var t=this.targetValues[e];return delete this.targetValues[e],this.addToActiveTargets(e),this.removeFromUpdatingTargets(e),t&&Qt().schedule(1,"deleteTargetValue-"+this.oid+"-"+e),this}},{key:"resetImperative",value:function(e){var t=this.targetValues[e],n=null==t?void 0:t.isImperative;return t&&(t.isImperative=!1,t.executionFlag=!1,t.scheduleTimeStamp=void 0,t.step=0,t.cycle=0,t.steps=0,t.cycles=0,t.interval=0),n&&Qt().schedule(1,"resetImperative-"+this.oid+"-"+e),this}},{key:"activateTarget",value:function(e,t){if(this.canTargetBeActivated(e)){s.isDefined("value")&&this.val("__".concat(e),t);var n=this.targetValues[e];n?(n.isImperative=!1,n.executionFlag=!1,n.scheduleTimeStamp=void 0,n.step=0,n.cycle=Array.isArray(n.valueList)?1:0,this.updateTargetStatus(e)):this.addToActiveTargets(e),this.activate(e)}return this}},{key:"manageChildTargetExecution",value:function(e,t){return t||this.shouldCalculateChildTargets()||e.hasChildren()||e.addedChildren.length>0||0===e.targetExecutionCount}},{key:"shouldCalculateChildTargets",value:function(){return this.val("shouldCalculateChildTargets")}},{key:"getCoreTargets",value:function(){return s.isDefined(this.val("coreTargets"))?this.val("coreTargets"):this.coreTargets}},{key:"getExternalEventList",value:function(){return this.externalEventList}},{key:"getInternalEventList",value:function(){return this.internalEventList}},{key:"hasExternalEvents",value:function(){return this.getExternalEventList().length>0}},{key:"getExternalEventMap",value:function(){return this.externalEventMap}},{key:"setTargetMethodName",value:function(e,t){(!M.ignoreTargetMethodNameMap[e]||this.isTargetUpdating(e)||this.isTargetImperative(e))&&(this.targetMethodMap[e]||(this.targetMethodMap[e]=[]),this.targetMethodMap[e].includes(t)||this.targetMethodMap[e].push(t))}}])}();function ee(e){return ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ee(e)}function te(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ne(r.key),r)}}function ne(e){var t=function(e){if("object"!=ee(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=ee(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ee(t)?t:t+""}var re=function(){return function(e,t){return t&&te(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.xNext=0,this.xNorth=0,this.xWest=0,this.xEast=0,this.xSouth=0,this.scrollLeft=0,this.scrollTop=0,this.absX=0,this.xOverflowReset=0,this.xOverflowLimit=0,this.yNext=0,this.yNorth=0,this.yWest=0,this.yEast=0,this.ySouth=0}),[{key:"setCurrentChild",value:function(e){this.currentChild=e}},{key:"setLocation",value:function(){this.currentChild.x=this.xNext+this.currentChild.getLeftMargin(),this.currentChild.y=this.yNext+this.currentChild.getTopMargin()}},{key:"isOverflow",value:function(){var e=this.currentChild.getMinWidth();return this.absX+this.currentChild.x+e+this.currentChild.getLeftMargin()>this.xOverflowLimit}},{key:"overflow",value:function(){this.xNext=this.scrollLeft-this.absX+this.xOverflowReset,this.yNext=this.ySouth}},{key:"appendNewLine",value:function(){var e=this.currentChild.getHeight()*this.currentChild.getMeasuringScale();this.xNext=this.scrollLeft-this.absX+this.xOverflowReset,this.yNext=this.ySouth>this.yNext?this.ySouth+this.currentChild.val("appendNewLine"):this.ySouth+e+this.currentChild.val("appendNewLine"),this.yEast=this.yNext,this.xSouth=this.xNext,this.ySouth=Math.max(this.yNext,this.ySouth),this.currentChild.getRealParent().viewport.xEast=Math.max(this.currentChild.getRealParent().viewport.xEast,this.xEast),this.currentChild.getRealParent().viewport.ySouth=Math.max(this.currentChild.getRealParent().viewport.ySouth,this.ySouth)}},{key:"nextLocation",value:function(){var e=this.currentChild.getHeight()*this.currentChild.getMeasuringScale(),t=this.currentChild.getBaseWidth()*this.currentChild.getMeasuringScale(),n=this.currentChild.getTopBaseHeight()*this.currentChild.getMeasuringScale(),r=this.yNext+e+this.currentChild.getTopMargin()+this.currentChild.getBottomMargin();this.xNext+=t+this.currentChild.getLeftMargin()+this.currentChild.getRightMargin(),this.yNext+=n,this.xSouth=this.xNext,this.yEast=this.yNext,this.xEast=Math.max(this.xNext,this.xEast),this.ySouth=Math.max(r,this.ySouth),this.currentChild.getRealParent().viewport.xEast=Math.max(this.currentChild.getRealParent().viewport.xEast,this.xEast),this.currentChild.getRealParent().viewport.ySouth=Math.max(this.currentChild.getRealParent().viewport.ySouth,this.ySouth)}}])}();function ie(e){return ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ie(e)}function ae(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return oe(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?oe(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){l=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(l)throw a}}}}function oe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function le(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ue(r.key),r)}}function se(e,t,n){return(t=ue(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ue(e){var t=function(e){if("object"!=ie(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=ie(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ie(t)?t:t+""}var ce=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return function(e,t,n){return n&&le(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(e,0,[{key:"clear",value:function(){e.foundParentWithType={},e.foundParentWithTarget={},e.foundTypeMap={},e.foundTargetMap={},e.foundOids={},e.foundHandler={}}},{key:"findFirstScrollHandler",value:function(t,n,r){if(t){var i="".concat(t.oid," ").concat(n," ").concat(r);if(e.foundHandler[i])return e.foundHandler[i];var a=this.findScrollHandler(t,r,n);return a&&(e.foundHandler[i]=a),a}}},{key:"findFirstHandler",value:function(t,n){if(t){var r="".concat(t.oid," ").concat(n);if(e.foundHandler[r])return e.foundHandler[r];var i=this.findEventHandler(t,n);return i&&(e.foundHandler[r]=i),i}}},{key:"findFirstScrollTopHandler",value:function(e,t){return this.findFirstScrollHandler(e,"onScrollTop",t)}},{key:"findFirstScrollLeftHandler",value:function(e,t){return this.findFirstScrollHandler(e,"onScrollLeft",t)}},{key:"findFirstPinchHandler",value:function(e){return this.findFirstHandler(e,"onPinch")}},{key:"findFirstSwipeHandler",value:function(e){return this.findFirstHandler(e,"onSwipe")}},{key:"findFirstEnterHandler",value:function(e){return this.findFirstHandler(e,"onEnter")}},{key:"findFirstLeaveHandler",value:function(e){return this.findFirstHandler(e,"onLeave")}},{key:"findFirstClickHandler",value:function(e){return this.findFirstHandler(e,"onClick")||this.findFirstHandler(e,"onAnyClick")}},{key:"findScrollHandler",value:function(e,t,n){for(;e&&(!e.canHandleEvent("onSwipe")||"wheel"===t);){if(e.canHandleEvent(n)||e.canHandleEvent("onScroll"))return e;e=e.getParent()}}},{key:"findEventHandler",value:function(e,t){for(;e;){if(e.canHandleEvent(t))return e;e=e.getParent()}}},{key:"findParentByType",value:function(t,n){var r="".concat(t.oid,"__").concat(n);if(!s.isDefined(e.foundParentWithType[r]))for(var i=t.getParent();i;){if(i.type===n){e.foundParentWithType[r]=i;break}i=i.getParent()}return e.foundParentWithType[r]}},{key:"findParentByTarget",value:function(t,n){var r="".concat(t.oid,"__").concat(n);if(!s.isDefined(e.foundParentWithTarget[r]))for(var i=t.getParent();i;){if(s.isDefined(i.targets[n])||s.isDefined(i.targetValues[n])){e.foundParentWithTarget[r]=i;break}i=i.getParent()}return e.foundParentWithTarget[r]}},{key:"findByType",value:function(t){if(!s.isDefined(e.foundTypeMap[t])){var n=function(e){if(e.type===t)return e;var r,i=ae(e.getChildren());try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a&&a.hasChildren()){var o=n(a);if(o)return o}else if(a&&a.type===t)return a}}catch(e){i.e(e)}finally{i.f()}},r=n(Nt.tRoot);r&&(e.foundTypeMap[t]=r)}return e.foundTypeMap[t]}},{key:"findByTarget",value:function(t){if(!s.isDefined(e.foundTargetMap[t])){var n=function(e){if(e.targets[t])return e;var r,i=ae(e.getChildren());try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a&&a.hasChildren()){var o=n(a);if(o)return o}else if(a&&a.targets[t])return a}}catch(e){i.e(e)}finally{i.f()}},r=n(Nt.tRoot);r&&(e.foundTargetMap[t]=r)}return e.foundTargetMap[t]}},{key:"find",value:function(t){if(!s.isDefined(e.foundOids[t])){var n=function(e){if(e.oid===t)return e;var r,i=ae(e.getChildren());try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a&&a.hasChildren()){var o=n(a);if(o)return o}else if(a&&a.oid===t)return a}}catch(e){i.e(e)}finally{i.f()}},r=n(Nt.tRoot);r&&(e.foundOids[t]=r)}return e.foundOids[t]}}])}();function he(e){return he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},he(e)}function de(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,fe(r.key),r)}}function fe(e){var t=function(e){if("object"!=he(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=he(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==he(t)?t:t+""}function ve(e,t,n){return t=ge(t),function(e,t){if(t&&("object"==he(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ye()?Reflect.construct(t,n||[],ge(e).constructor):t.apply(e,n))}function ye(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ye=function(){return!!e})()}function ge(e){return ge=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ge(e)}function pe(e,t){return pe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},pe(e,t)}se(ce,"foundParentWithType",{}),se(ce,"foundParentWithTarget",{}),se(ce,"foundTypeMap",{}),se(ce,"foundTargetMap",{}),se(ce,"foundOids",{}),se(ce,"foundHandler",{});var me=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=ve(this,t,[e,n])).addedChildren=[],r.deletedChildren=[],r.movedChildren=[],r.lastChildrenUpdate={additions:[],deletions:[]},r.allChildrenList=[],r.allChildrenMap={},r.childrenUpdateFlag=!1,r.$dom=null,r.x=0,r.y=0,r.absX=0,r.absY=0,r.domHeightTimestamp=0,r.domWidthTimestamp=0,r.contentWidth=0,r.contentHeight=0,r.bottomBaseWidth=0,r.topBaseHeight=0,r.styleMap={},r.transformMap={},r.visibilityStatus=void 0,r.isNowInvisible=!1,r.visibleChildren=[],r.hasDomNow=!1,r.isNowVisible=!1,r.currentStatus="new",r.initTargets(),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pe(e,t)}(t,e),function(e,t){return t&&de(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"createViewport",value:function(){this.viewport=this.viewport||new re;var e=-this.getScrollLeft(),t=-this.getScrollTop(),n=e,r=t;for(var i in this.viewport.xNext=n,this.viewport.xNorth=n,this.viewport.xEast=n,this.viewport.xSouth=n,this.viewport.xWest=n,this.viewport.scrollLeft=e,this.viewport.scrollTop=t,this.viewport.absX=this.absX,this.viewport.absY=this.absY,this.viewport.xOverflowReset=this.absX,this.viewport.xOverflowLimit=this.absX+this.getWidth(),this.viewport.yNext=r,this.viewport.yNorth=r,this.viewport.yWest=r,this.viewport.yEast=r,this.viewport.ySouth=r,Object.assign(this.viewport,this.val("viewport")||{}),this.viewport){var a="viewport_".concat(i);s.isDefined(this.val(a))&&(this.viewport[i]=this.val(a))}return this.viewport}},{key:"calcAbsolutePosition",value:function(e,t){this.absX=s.isDefined(this.val("absX"))?this.val("absX"):this.getParent().absX+e,this.absY=s.isDefined(this.val("absY"))?this.val("absY"):this.getParent().absY+t}},{key:"addChild",value:function(e){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.addedChildren.length+this.allChildrenList.length;if(p.markTargetAction(this,"childAction"),"object"===he(e)){if(this.childrenUpdateFlag=!0,!(e instanceof t)){var i=Object.keys(this.actualValues).find((function(t){return n.actualValues[t]===e}));i?(e=new t(e.id||i,e),this.actualValues[i]=e):e=e.id?new t(e.id,e):new t("".concat(this.oid,"_"),e)}this.addedChildren.push({index:r,child:e}),e.parent=this,e.updatingTargetList.length>0&&this.addToUpdatingChildren(e),e.activeTargetList.length>0&&this.addToActiveChildren(e),e.activate()}return this}},{key:"removeChild",value:function(e){return this.deletedChildren.push(e),this.removeFromUpdatingChildren(e),this.childrenUpdateFlag=!0,Qt().schedule(1,"removeChild-"+this.oid+"-"+e.oid),this}},{key:"moveChild",value:function(e,t){return this.movedChildren.push({index:t,child:e}),e.hasDom()&&e.requiresDomRelocation()&&(e.domOrderIndex=t,e.activate()),this.childrenUpdateFlag=!0,Qt().schedule(1,"moveChild-"+this.oid+"-"+e.oid),this}},{key:"getChildren",value:function(){var e=this;if(this.deletedChildren.length>0&&(this.deletedChildren.forEach((function(t){if(e.allChildrenMap[t.oid]){var n=e.allChildrenList.indexOf(t);e.lastChildrenUpdate.deletions.push(t),e.allChildrenList.splice(n,1),delete e.allChildrenMap[t.oid]}})),this.deletedChildren.length=0),this.addedChildren.length>0&&(this.addedChildren.sort((function(e,t){return e.index-t.index})),this.addedChildren.forEach((function(t){var n=t.index,r=t.child;e.allChildrenMap[r.oid]||(s.isDefined(r.val("canDeleteDom"))||!1!==e.val("canDeleteDom")||r.val("canDeleteDom",!1),n>=e.allChildrenList.length?e.allChildrenList.push(r):e.allChildrenList.splice(n,0,r),e.allChildrenMap[r.oid]=r,e.lastChildrenUpdate.additions.push({index:n,child:r}))})),this.addedChildren.length=0),this.movedChildren.length>0){this.movedChildren.sort((function(e,t){return e.index-t.index}));var t={},n={};this.movedChildren.forEach((function(r){var i=r.index,a=r.child;e.lastChildrenUpdate.deletions.push(a),e.lastChildrenUpdate.additions.push({index:i,child:a});var o=e.allChildrenList.indexOf(a);if(i!==o){n[a.oid]&&delete n[a.oid];var l=e.allChildrenList.splice(i,1,a);!t[i]&&l.length>0&&(n[l[0].oid]={child:l[0],index:i+1}),o>=0&&(t[o]={fromIndex:o<i?o:i,child:a}),t[i]&&delete t[i]}})),Object.values(n).forEach((function(t){var n=t.index,r=t.child;e.allChildrenList.splice(n,0,r)})),Object.values(t).forEach((function(t){var n=t.fromIndex,r=t.child,i=e.allChildrenList.indexOf(r,n);e.allChildrenList.splice(i,1)})),this.movedChildren.length=0}return this.allChildrenList}},{key:"removeAll",value:function(){return this.allChildrenList=[],this.allChildrenMap={},this.updatingChildrenList.length=0,this.updatingChildrenMap={},this.hasDom()&&this.$dom.deleteAll(),this}},{key:"addToParentVisibleChildren",value:function(){this.isVisible()&&this.isInFlow()&&this.getParent()&&this.getParent().visibleChildren.push(this)}},{key:"shouldCalculateChildren",value:function(){if(s.isDefined(this.val("calculateChildren")))return this.val("calculateChildren");var e=this.isIncluded()&&(this.isVisible()||"new"===this.currentStatus)&&(this.hasChildren()||this.childrenUpdateFlag||this.getContentHeight()>0);return this.currentStatus=void 0,e}},{key:"getFirstChild",value:function(){return this.getChildren()[0]}},{key:"hasChildren",value:function(){return this.getChildren().length>0}},{key:"findChildren",value:function(e){return this.getChildren().filter((function(t){return t.type===e}))}},{key:"getLastChild",value:function(){return this.getChildren()[this.allChildrenList.length-1]}},{key:"getChild",value:function(e){return this.getChildren()[e]}},{key:"getChildIndex",value:function(e){return this.getChildren().indexOf(e)}},{key:"getChildrenOids",value:function(){return this.getChildren().map((function(e){return e.oid})).join(" ")}},{key:"findChild",value:function(e){return this.getChildren().find((function(t){return t.type===e}))}},{key:"findLastChild",value:function(e){return this.getChildren().findLast((function(t){return t.type===e}))}},{key:"getChildByOid",value:function(e){return this.allChildrenMap[e]}},{key:"getParentValue",value:function(e){var t=ce.findParentByTarget(this,e);return t?t.val(e):void 0}},{key:"delVal",value:function(e){e.startsWith("_")?delete this[e.slice(1)]:delete this.actualValues[e]}},{key:"val",value:function(e,t){var n=this.actualValues,r=this.lastActualValues;return e.startsWith("_")&&(n=this,e=e.slice(1)),void 0!==t?(r[e]=n[e],t!==n[e]&&(n[e]=t),this):n[e]}},{key:"lastVal",value:function(e){return this.lastActualValues[e]}},{key:"floorVal",value:function(e){return Math.floor(this.val(e))}},{key:"getDomParent",value:function(){return this.val("domParent")||ce.findParentByTarget(this,"domHolder")}},{key:"getDomHolder",value:function(e){var t=this.val("domHolder"),n=this.getDomParent();return!0===t&&e!==this?this.$dom:t&&!0!==t&&e.$dom!==t?t:n?n.$dom:null}},{key:"bug",value:function(){return[{visible:this.isVisible()},{visibilityStatus:this.visibilityStatus},{hasDom:this.hasDom()},{x:this.getX()},{y:this.getY()},{width:this.getWidth()},{height:this.getHeight()},{activeTargetList:this.activeTargetList},{updatingTargetList:this.updatingTargetList},{updatingChildrenList:this.updatingChildrenList},{activeChildrenList:this.activeChildrenList},{children:this.getChildren()},{targetValues:this.targetValues},{actualValues:this.actualValues}]}},{key:"logTree",value:function(){s.logTree(this)}},{key:"isVisible",value:function(){return this.val("isVisible")}},{key:"calcVisibility",value:function(){return s.calcVisibility(this)}},{key:"validateVisibilityInParent",value:function(){return!!s.isDefined(this.val("validateVisibilityInParent"))&&this.val("validateVisibilityInParent")}},{key:"hasDomHolderChanged",value:function(){return!this.reuseDomDefinition()&&this.getDomHolder(this)&&this.getDomHolder(this).exists()&&this.$dom.parent()!==this.getDomHolder(this).element}},{key:"hasBaseElementChanged",value:function(){return this.getBaseElement()!==this.$dom.getTagName()}},{key:"hasDom",value:function(){return!!this.$dom&&this.$dom.exists()}},{key:"getRealParent",value:function(){return this.parent}},{key:"getContentHeight",value:function(){return this.contentHeight}},{key:"getContentWidth",value:function(){return this.contentWidth}},{key:"calcContentWidthHeight",value:function(){this.contentHeight=this.viewport.ySouth-this.viewport.yNorth,this.topBaseHeight=this.viewport.yEast-this.viewport.yNorth,this.bottomBaseWidth=this.viewport.xSouth-this.viewport.xWest,this.contentWidth=this.viewport.xEast-this.viewport.xWest}},{key:"getBaseWidth",value:function(){var e;return null!==(e=this.val("baseWidth"))&&void 0!==e?e:this.getWidth()}},{key:"getMinWidth",value:function(){var e;return null!==(e=this.val("minWidth"))&&void 0!==e?e:this.getWidth()}},{key:"getTopBaseHeight",value:function(){var e;return null!==(e=this.val("topBaseHeight"))&&void 0!==e?e:0}},{key:"getContainerOverflowMode",value:function(){var e;return null!==(e=this.val("containerOverflowMode"))&&void 0!==e?e:"auto"}},{key:"getItemOverflowMode",value:function(){var e;return null!==(e=this.val("itemOverflowMode"))&&void 0!==e?e:"auto"}},{key:"getUIDepth",value:function(){for(var e=0,t=this.parent;t;)e++,t=t.parent;return e}},{key:"isTextOnly",value:function(){return this.val("textOnly")}},{key:"getHtml",value:function(){return this.val("html")}},{key:"isInFlow",value:function(){return!s.isDefined(this.val("isInFlow"))||this.val("isInFlow")}},{key:"canHandleEvent",value:function(e){return this.getExternalEventMap()[e]}},{key:"preventDefault",value:function(){return s.isDefined(this.val("preventDefault"))?this.val("preventDefault"):this.getParentValue("preventDefault")||!1}},{key:"canDeleteDom",value:function(){return s.isDefined(this.val("canDeleteDom"))?this.val("canDeleteDom"):!this.reuseDomDefinition()}},{key:"excludeDefaultStyling",value:function(){return!1===this.targets.defaultStyling||this.excludeStyling()||this.reuseDomDefinition()&&0===this.allStyleTargetList.length}},{key:"excludeStyling",value:function(){return!1===this.targets.styling}},{key:"getBracketThreshold",value:function(){return this.val("bracketThreshold")}},{key:"getBracketSize",value:function(){return this.val("bracketSize")}},{key:"shouldBeBracketed",value:function(){return s.isDefined(this.val("shouldBeBracketed"))?this.val("shouldBeBracketed"):this.getChildren().length>this.getBracketThreshold()}},{key:"isIncluded",value:function(){return this.val("isIncluded")}},{key:"canHaveDom",value:function(){return!(this.targets.$dom&&!this.val("$dom"))&&this.val("canHaveDom")}},{key:"requiresDomRelocation",value:function(){return s.isDefined(this.val("requiresDomRelocation"))?this.val("requiresDomRelocation"):!s.isDefined(this.transformMap.x)&&!s.isDefined(this.transformMap.y)}},{key:"getBaseElement",value:function(){return this.val("baseElement")}},{key:"getOpacity",value:function(){return this.val("opacity")}},{key:"getCenterX",value:function(){return(this.getParentValue("width")-this.getWidth())/2}},{key:"getCenterY",value:function(){return(this.getParentValue("height")-this.getHeight())/2}},{key:"getX",value:function(){return this.val("x")}},{key:"getY",value:function(){return this.val("y")}},{key:"getTransformX",value:function(){var e;return this.absX-(null===(e=this.getDomParent())||void 0===e?void 0:e.absX)}},{key:"getTransformY",value:function(){var e;return this.absY-(null===(e=this.getDomParent())||void 0===e?void 0:e.absY)}},{key:"getZ",value:function(){return this.val("z")}},{key:"getPerspective",value:function(){return this.val("perspective")}},{key:"getRotate",value:function(){return this.val("rotate")}},{key:"getRotateX",value:function(){return this.val("rotateX")}},{key:"getRotateY",value:function(){return this.val("rotateY")}},{key:"getRotateZ",value:function(){return this.val("rotateZ")}},{key:"getScale",value:function(){return this.val("scale")}},{key:"getScaleX",value:function(){return this.val("scaleX")}},{key:"getScaleY",value:function(){return this.val("scaleY")}},{key:"getScaleZ",value:function(){return this.val("scaleZ")}},{key:"getSkewX",value:function(){return this.val("skewX")}},{key:"getSkewY",value:function(){return this.val("skewY")}},{key:"getSkewZ",value:function(){return this.val("skewZ")}},{key:"getMeasuringScale",value:function(){return this.val("scale")}},{key:"getZIndex",value:function(){return this.val("zIndex")}},{key:"getTopMargin",value:function(){return this.val("topMargin")}},{key:"getLeftMargin",value:function(){return this.val("leftMargin")}},{key:"getRightMargin",value:function(){return this.val("rightMargin")}},{key:"getBottomMargin",value:function(){return this.val("bottomMargin")}},{key:"getWidth",value:function(){return this.val("width")}},{key:"getHeight",value:function(){return this.val("height")}},{key:"getScrollTop",value:function(){return this.val("scrollTop")}},{key:"getScrollLeft",value:function(){return this.val("scrollLeft")}},{key:"getCss",value:function(){return this.val("css")}},{key:"getStyle",value:function(){return this.val("style")}},{key:"getBackground",value:function(){return this.val("background")}},{key:"getBackgroundColor",value:function(){return this.val("backgroundColor")}},{key:"getAttributes",value:function(){return this.val("attributes")}},{key:"getInputValue",value:function(){return this.hasDom()?this.$dom.value():void 0}},{key:"isOverflowHidden",value:function(){return"hidden"===this.val("overflow")}},{key:"reuseDomDefinition",value:function(){return this.val("reuseDomDefinition")}}])}(J);function be(e){return be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},be(e)}function Te(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,we(r.key),r)}}function we(e){var t=function(e){if("object"!=be(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=be(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==be(t)?t:t+""}var ke=function(){return function(e,t){return t&&Te(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.style=void 0}),[{key:"setup",value:function(){this.style={transform:this.prefixStyle("transform"),transitionTimingFunction:this.prefixStyle("transitionTimingFunction"),transitionDuration:this.prefixStyle("transitionDuration")}}},{key:"prefixStyle",value:function(e){var t=new d;t.create("div");for(var n=t.style(),r="",i=["webkitT","MozT","msT","OT","t"],a=0;a<i.length;a++)i[a]+"ransform"in n&&(r=i[a].substr(0,i[a].length-1));return""===r?e:r+e.charAt(0).toUpperCase()+e.substr(1)}}])}();function Se(e){return Se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Se(e)}function Ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Me(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,xe(r.key),r)}}function Ce(e,t,n){return(t=xe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xe(e){var t=function(e){if("object"!=Se(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Se(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Se(t)?t:t+""}var Le=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$document=new d(document),this.currentTouch={deltaY:0,deltaX:0,prevDeltaX:0,prevDeltaY:0,pinchDelta:0,key:"",manualMomentumFlag:!1,orientation:"none",dir:"",source:""},this.lastEvent=void 0,this.touchTimeStamp=0,this.cursor={x:0,y:0},this.start0=void 0,this.start1=void 0,this.end0=void 0,this.end1=void 0,this.touchCount=0,this.canFindHandlers=!0,this.swipeStartX=0,this.swipeStartY=0,this.currentEventName="",this.currentEventType="",this.currentEventTarget=void 0,this.currentHandlers={touch:null,scrollLeft:null,scrollTop:null,swipe:null,pinch:null,focus:null,justFocused:null,blur:null,leave:null,enter:null,start:null,end:null,hover:null},this.eventQueue=[],this.attachedEventMap={},this.eventTargetMap={},this.allEvents={},Object.values(M.events).forEach((function(e){Object.assign(t.allEvents,e)})),this.bindedHandleEvent=this.handleEvent.bind(this),this.bindedParentHandleEvent=this.handleDocEvent.bind(this)}return function(e,t){return t&&Me(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}(e,[{key:"detachWindowEvents",value:function(){var e=this;Object.keys(M.events.windowEvents).forEach((function(t){Nt.$window.detachEvent(t,e.bindedHandleEvent)}))}},{key:"attachWindowEvents",value:function(){var e=this;Object.keys(M.events.windowEvents).forEach((function(t){Nt.$window.addEvent(t,e.bindedHandleEvent)}))}},{key:"detachDocumentEvents",value:function(){var e=this;Object.keys(M.events.documentEvents).forEach((function(t){e.$document.detachEvent(t,e.bindedParentHandleEvent)}))}},{key:"attachDocumentEvents",value:function(){var e=this;Object.keys(M.events.documentEvents).forEach((function(t){e.$document.addEvent(t,e.bindedParentHandleEvent)}))}},{key:"attachEvents",value:function(e){var t,n=this,r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Ee(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ee(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){l=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(l)throw a}}}}(e);try{var i=function(){var e=t.value;e.getExternalEventList().forEach((function(t){n.attachTargetEvents(e,t)}))};for(r.s();!(t=r.n()).done;)i()}catch(e){r.e(e)}finally{r.f()}}},{key:"attachTargetEvents",value:function(e,t){var n=this,r="".concat(e.oid," ").concat(t);!e.hasDom()||this.eventTargetMap[r]&&this.eventTargetMap[r]===e.$dom||(this.eventTargetMap[r]=e.$dom,M.targetToEventsMapping[t].forEach((function(t){var r=M.events[t];Object.keys(r).forEach((function(t){var i="".concat(e.oid," ").concat(t),a=r[t].windowEvent?Nt.$window:e.$dom;a.detachEvent(t,n.bindedHandleEvent),a.addEvent(t,n.bindedHandleEvent),n.attachedEventMap[i]={$dom:a,event:t}}))})))}},{key:"detachAll",value:function(){var e=this;Object.keys(this.attachedEventMap).forEach((function(t){var n=e.attachedEventMap[t],r=n.$dom,i=n.event;r.exists()&&r.detachEvent(i,e.bindedHandleEvent)})),this.attachedEventMap={},this.eventTargetMap={}}},{key:"resetEventsOnTimeout",value:function(){if(this.currentTouch.deltaY||this.currentTouch.deltaX||this.currentTouch.pinchDelta){var e=this.touchTimeStamp-s.now();e>100&&(this.currentTouch.deltaY*=.95,this.currentTouch.deltaX*=.95,this.currentTouch.pinchDelta*=.95,Math.abs(this.currentTouch.deltaY)<.1&&(this.currentTouch.deltaY=0),Math.abs(this.currentTouch.deltaX)<.1&&(this.currentTouch.deltaX=0),Math.abs(this.currentTouch.pinchDelta)<.1&&(this.currentTouch.pinchDelta=0),0===this.currentTouch.deltaX&&0===this.currentTouch.deltaY&&0===this.currentTouch.pinchDelta&&(this.touchTimeStamp=0)),(e<=0||0===this.touchTimeStamp)&&(this.currentTouch.deltaY=0,this.currentTouch.deltaX=0,this.currentTouch.pinchDelta=0,this.touchTimeStamp=0),Qt().schedule(10,"scroll decay")}}},{key:"findEventHandlers",value:function(e){var t,n,r,i,a,o,l,s,u=e.tmodel,c=e.eventType;u&&(t=ce.findFirstClickHandler(u),n=ce.findFirstSwipeHandler(u),l=ce.findFirstEnterHandler(u),s=ce.findFirstLeaveHandler(u),r=ce.findFirstScrollLeftHandler(u,c),i=ce.findFirstScrollTopHandler(u,c),a=ce.findFirstPinchHandler(u),o=d.hasFocus(u)?u:this.currentHandlers.focus),this.currentHandlers.scrollLeft===r&&this.currentHandlers.scrollTop===i||this.clearTouch(),this.currentHandlers.focus!==o&&(this.currentHandlers.justFocused=o,this.currentHandlers.blur=this.currentHandlers.focus),this.currentHandlers.start=null!=u&&u.canHandleEvent("onStart")?u:void 0,this.currentHandlers.end=null!=u&&u.canHandleEvent("onEnd")?u:void 0,this.currentHandlers.hover=null!=u&&u.canHandleEvent("onHover")?u:void 0,this.currentHandlers.click=t,this.currentHandlers.swipe=n,this.currentHandlers.scrollLeft=r,this.currentHandlers.scrollTop=i,this.currentHandlers.pinch=a,this.currentHandlers.focus=o,this.currentHandlers.enter=l,this.currentHandlers.leave=s}},{key:"captureEvents",value:function(){if(this.currentTouch.prevDeltaX=0,this.currentTouch.prevDeltaY=0,this.currentHandlers.enter=void 0,this.currentHandlers.leave=void 0,this.currentHandlers.justFocused=void 0,this.currentHandlers.blur=void 0,0===this.eventQueue.length)return this.currentEventName="",this.currentEventType="",this.currentEventTarget=void 0,void(this.currentKey="");var e=this.eventQueue.shift();this.canFindHandlers&&this.findEventHandlers(e),"end"!==e.eventType&&"click"!==e.eventType||(this.canFindHandlers=!0),this.currentEventName=e.eventName,this.currentEventType=e.eventType,this.currentEventTarget=e.eventTarget,this.currentKey=this.currentTouch.key,this.currentTouch.key=""}},{key:"handleDocEvent",value:function(e){this.handleEvent(e,!0)}},{key:"handleEvent",value:function(t,n){var r,i,a;if(t){var o=t.type,l=t.target,u=this.allEvents[o];if(u){var c,h=u.eventName,d=u.inputType,f=u.eventType,v=u.order,y=u.queue,g=u.rateLimit,p=s.now(),m=this.getTModelFromEvent(t),b={eventName:h,eventItem:u,eventType:f,originalName:o,tmodel:m,eventTarget:l,timeStamp:p};if(null!==(r=this.lastEvent)&&void 0!==r&&r.eventItem){var T=this.lastEvent,w=T.eventItem,k=p-T.timeStamp;if(d&&w.inputType&&w.inputType!==d&&v>w.order)return;if(this.eventQueue.length>e.MAX_EVENT_QUEUE_SIZE&&g>0&&k<g)for(var S=0,E=this.eventQueue.length-1;E>=0;E--){var M;if((null===(M=this.eventQueue[E].eventItem)||void 0===M?void 0:M.eventType)!==f)break;if(++S>e.MAX_EVENT_TYPE_CAPACITY)return}}switch(this.lastEvent=b,y&&this.eventQueue.push(this.lastEvent),h){case"mousedown":case"touchstart":return this.clearStart(),this.clearEnd(),this.clearTouch(),this.touchCount=this.countTouches(t)||1,this.preventDefault(m,h)&&t.cancelable&&t.preventDefault(),this.start0=this.getTouch(t),this.start1=this.getTouch(t,1),this.cursor.x=this.start0.x,this.cursor.y=this.start0.y,this.findEventHandlers(b),this.canFindHandlers=!1,this.swipeStartX=this.start0.x-(null===(i=this.currentHandlers.swipe)||void 0===i?void 0:i.getX()),this.swipeStartY=this.start0.y-(null===(a=this.currentHandlers.swipe)||void 0===a?void 0:a.getY()),t.stopPropagation(),this.detachDocumentEvents(),void this.attachDocumentEvents(m.getDomParent());case"mousemove":case"touchmove":c=this.getTouch(t),this.cursor.x=c.x,this.cursor.y=c.y,this.preventDefault(m,h)&&t.preventDefault(),this.touchCount>0?(this.touchTimeStamp=p+10,this.move(t),t.stopPropagation()):this.isCurrentSource("wheel")&&this.clearTouch();break;case"mouseup":case"touchend":this.detachDocumentEvents(),this.preventDefault(m,h)&&t.preventDefault(),c=this.getTouch(t),this.cursor.x=c.x,this.cursor.y=c.y,this.end(t),this.clearEnd(),this.touchCount=0,t.stopPropagation();break;case"click":if(this.preventDefault(m,h)&&t.preventDefault(),this.end0=this.getTouch(t),this.start0){var C=ce.findFirstClickHandler(m);C&&C===this.currentHandlers.click&&(this.eventQueue.length=0,this.eventQueue.push({eventName:h,eventItem:u,eventType:f,originalName:o,tmodel:m,eventTarget:l,timeStamp:p}))}this.clearEnd(),this.touchCount=0,t.stopPropagation();break;case"wheel":this.preventDefault(m,h)&&t.preventDefault(),this.touchTimeStamp=p+500,this.wheel(t);break;case"mouseleave":n&&this.touchCount>0&&(this.detachDocumentEvents(),c=this.getTouch(t),this.cursor.x=c.x,this.cursor.y=c.y,this.end(t),this.clearEnd(),this.touchCount=0,t.stopPropagation());break;case"key":this.currentTouch.key=t.which||t.keyCode;break;case"resize":this.resizeRoot()}Qt().schedule(0,"".concat(o,"-").concat(h,"-").concat((t.target.tagName||"").toUpperCase()))}}}},{key:"resizeRoot",value:function(){H.executeDeclarativeTarget(Wt(),"width"),H.executeDeclarativeTarget(Wt(),"height")}},{key:"preventDefault",value:function(e,t){return!(!e||!(!0===e.preventDefault()||Array.isArray(e.preventDefault())&&e.preventDefault().includes(t)))}},{key:"getTModelFromEvent",value:function(e){var t,n=null===(t=e.target)||void 0===t?void 0:t.id;return n&&Nt.manager.visibleOidMap[n]||(n=d.findNearestParentWithId(e.target)),Nt.manager.visibleOidMap[n]}},{key:"clearStart",value:function(){this.start0=void 0,this.start1=void 0}},{key:"clearEnd",value:function(){this.end0=void 0,this.end1=void 0}},{key:"clearTouch",value:function(){this.currentTouch={deltaY:0,deltaX:0,prevDeltaX:0,prevDeltaY:0,pinchDelta:0,key:"",manualMomentumFlag:!1,orientation:"none",dir:"",source:""}}},{key:"clearAll",value:function(){this.clearStart(),this.clearEnd(),this.clearTouch(),this.eventQueue.length=0,this.touchTimeStamp=0,this.touchCount=0,this.canFindHandlers=!0,this.lastEvent=void 0,this.attachedEventMap={},this.eventTargetMap={},this.swipeStartX=0,this.swipeStartY=0}},{key:"deltaX",value:function(){return this.currentTouch.deltaX}},{key:"deltaY",value:function(){return this.currentTouch.deltaY}},{key:"cursorX",value:function(){return this.cursor.x}},{key:"cursorY",value:function(){return this.cursor.y}},{key:"swipeX",value:function(){return this.cursor.x-this.swipeStartX}},{key:"swipeY",value:function(){return this.cursor.y-this.swipeStartY}},{key:"pinchDelta",value:function(){return this.currentTouch.pinchDelta}},{key:"dir",value:function(){return this.currentTouch.dir}},{key:"getScrollLeftHandler",value:function(){return this.currentHandlers.scrollLeft}},{key:"getScrollTopHandler",value:function(){return this.currentHandlers.scrollTop}},{key:"getPinchHandler",value:function(){return this.currentHandlers.pinch}},{key:"getClickHandler",value:function(){return this.currentHandlers.click}},{key:"getTouchCount",value:function(){return this.touchCount}},{key:"isClickEvent",value:function(){return"click"===this.getEventType()}},{key:"isMoveEvent",value:function(){return"move"===this.getEventType()}},{key:"isResizeEvent",value:function(){return"resize"===this.getEventType()}},{key:"isSwipeEvent",value:function(){return this.hasDelta()&&1===this.touchCount}},{key:"isScrollEvent",value:function(){return this.hasDelta()&&this.isCurrentSource("wheel")}},{key:"hasDelta",value:function(){return 0!==this.deltaX()||0!==this.deltaY()}},{key:"isEndEvent",value:function(){return"end"===this.getEventType()||"click"===this.getEventType()}},{key:"isStartEvent",value:function(){return"start"===this.getEventType()}},{key:"getEventName",value:function(){return this.currentEventName}},{key:"getEventTarget",value:function(){return this.currentEventTarget}},{key:"getEventType",value:function(){return this.currentEventType}},{key:"isClickHandler",value:function(e){return this.getClickHandler()===e&&this.isClickEvent()}},{key:"isEnterHandler",value:function(e){return e===this.currentHandlers.enter&&"mouseenter"===this.getEventName()}},{key:"isLeaveHandler",value:function(e){return e===this.currentHandlers.leave&&"mouseleave"===this.getEventName()}},{key:"isHoverHandler",value:function(e){return e===this.currentHandlers.hover}},{key:"isSwipeHandler",value:function(e){return e===this.currentHandlers.swipe}},{key:"isStartHandler",value:function(e){return e===this.currentHandlers.start}},{key:"isEndHandler",value:function(e){return e===this.currentHandlers.end}},{key:"onFocus",value:function(e){return this.currentHandlers.justFocused===e}},{key:"onBlur",value:function(e){return this.currentHandlers.blur===e}},{key:"hasFocus",value:function(e){return this.currentHandlers.focus===e}},{key:"isScrollLeftHandler",value:function(e){return this.currentHandlers.scrollLeft===e}},{key:"isScrollTopHandler",value:function(e){return this.currentHandlers.scrollTop===e}},{key:"isPinchHandler",value:function(e){return this.currentHandlers.pinch===e}},{key:"isCurrentSource",value:function(e){return this.currentTouch.source===e}},{key:"getOrientation",value:function(){return this.currentTouch.orientation}},{key:"countTouches",value:function(e){var t,n;return(null===(t=e.touches)||void 0===t?void 0:t.length)||(null===(n=e.originalEvent)||void 0===n||null===(n=n.touches)||void 0===n?void 0:n.length)}},{key:"getTouch",value:function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=(null===(t=e.touches)||void 0===t?void 0:t[r])||(null===(n=e.originalEvent)||void 0===n||null===(n=n.touches)||void 0===n?void 0:n[r])||e,a=s.isDefined(i.clientX)?i.clientX:i.pageX||0,o=s.isDefined(i.clientY)?i.clientY:i.pageY||0;return{x:a,y:o,originalX:a,originalY:o,target:i.target,timeStamp:s.now()}}},{key:"move",value:function(e){if(1===this.touchCount){if(this.start0.y=this.end0?this.end0.y:this.start0.y,this.start0.x=this.end0?this.end0.x:this.start0.x,this.end0=this.getTouch(e),s.isDefined(this.end0)){var t=this.start0.x-this.end0.x,n=this.start0.y-this.end0.y;this.setDeltaXDeltaY(t,n,"touch")}}else if(this.touchCount>=2){this.end0=this.getTouch(e),this.end1=this.getTouch(e,1);var r=s.distance(this.start0.x,this.start0.y,this.start1.x,this.start1.y),i=s.distance(this.end0.x,this.end0.y,this.end1.x,this.end1.y)-r;this.currentTouch.pinchDelta=i>0?.3:i<0?-.3:0}}},{key:"end",value:function(){if(this.touchCount<=1&&this.start0){var e,t=0,n=0,r=0;s.isDefined(this.end0)&&(t=this.start0.originalX-this.end0.x,n=this.start0.originalY-this.end0.y,r=s.now()-this.start0.timeStamp<250?s.now()-this.start0.timeStamp:0),"horizontal"===this.currentTouch.orientation&&Math.abs(t)>0&&r>0?(e=s.momentum(0,t,r),this.touchTimeStamp=this.end0.timeStamp+e.duration,this.touchTimeStamp-s.now()>0&&(this.currentTouch.deltaX=e.distance,this.currentTouch.manualMomentumFlag=!0)):"vertical"===this.currentTouch.orientation&&Math.abs(n)>0&&r>0&&(e=s.momentum(0,n,r),this.touchTimeStamp=this.end0.timeStamp+e.duration,this.touchTimeStamp-s.now()>0&&(this.currentTouch.deltaY=e.distance,this.currentTouch.manualMomentumFlag=!0))}}},{key:"setDeltaXDeltaY",value:function(e,t,n){var r=Math.abs(e)-Math.abs(t);r>=1?("none"===this.currentTouch.orientation||"vertical"===this.currentTouch.orientation&&r>=2||"horizontal"===this.currentTouch.orientation)&&(this.currentTouch.orientation="horizontal",this.currentTouch.dir=e<=-1?"left":e>=1?"right":this.currentTouch.dir,this.currentTouch.source=n):("none"===this.currentTouch.orientation||"horizontal"===this.currentTouch.orientation&&r<=-2||"vertical"===this.currentTouch.orientation)&&(this.currentTouch.orientation="vertical",this.currentTouch.dir=t<=-1?"up":t>=1?"down":this.currentTouch.dir,this.currentTouch.source=n),this.currentTouch.prevDeltaX+=e,this.currentTouch.prevDeltaY+=t,this.currentTouch.deltaX=this.currentTouch.prevDeltaX,this.currentTouch.deltaY=this.currentTouch.prevDeltaY}},{key:"wheel",value:function(e){var t=0,n=0;this.currentTouch.pinchDelta=0,this.start0=this.getTouch(e),e.ctrlKey&&"deltaY"in e?this.currentTouch.pinchDelta=-e.deltaY/10:"deltaX"in e?(t=e.deltaX,n=e.deltaY):"wheelDeltaX"in e?(t=-e.wheelDeltaX/120,n=-e.wheelDeltaY/120):"wheelDelta"in e?t=-e.wheelDelta/120:"detail"in e&&(t=e.detail/3),this.setDeltaXDeltaY(t,n,"wheel")}}])}();function De(e){return De="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},De(e)}function Pe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Oe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pe(Object(n),!0).forEach((function(t){je(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function je(e,t,n){return(t=Ie(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ae(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ie(r.key),r)}}function Ie(e){var t=function(e){if("object"!=De(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=De(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==De(t)?t:t+""}Ce(Le,"MAX_EVENT_QUEUE_SIZE",10),Ce(Le,"MAX_EVENT_TYPE_CAPACITY",2);var Ve=function(){return function(e,t){return t&&Ae(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.cacheMap={},this.tmodelKeyMap={},this.fetchingAPIMap={},this.fetchingImageMap={}}),[{key:"fetchCommon",value:function(e,t,n,r,i){return p.markTargetAction(n,"fetchAction"),t&&this.isFetched(t)?r[e]||(r[e]={fetchId:e,cacheId:t,fetchingFlag:!0,startTime:s.now(),targets:[{tmodel:n,targetName:n.key}],fetchMap:r}):r[e]?r[e].targets.push({tmodel:n,targetName:n.key}):(r[e]={fetchId:e,cacheId:t,fetchingFlag:!0,startTime:s.now(),targets:[{tmodel:n,targetName:n.key}],fetchMap:r},i()),this.addToTModelKeyMap(n,n.key,e,t),e}},{key:"fetch",value:function(e,t,n,r){var i=this,a="".concat(e.oid,"_").concat(t,"_").concat(JSON.stringify(n));this.fetchCommon(a,r,e,this.fetchingAPIMap,(function(){i.ajaxAPI(t,n,i.fetchingAPIMap[a])}))}},{key:"fetchImage",value:function(e,t,n){var r=this,i="".concat(e.oid,"_").concat(t);return this.fetchCommon(i,n,e,this.fetchingImageMap,(function(){r.loadImage(t,r.fetchingImageMap[i])}))}},{key:"getTModelKey",value:function(e,t){return"".concat(document.URL," ").concat(e.oid," ").concat(t)}},{key:"getLoadTargetName",value:function(e){return"load-".concat(e)}},{key:"addToTModelKeyMap",value:function(e,t,n,r){var i=this.getTModelKey(e,t),a=this.getLoadTargetName(t);this.tmodelKeyMap[i]||(this.tmodelKeyMap[i]={fetchMap:{},entryCount:0,resultCount:0,errorCount:0,activeIndex:0,accessIndex:0},e.val(a,[])),this.tmodelKeyMap[i].fetchMap[n]||(this.tmodelKeyMap[i].fetchMap[n]={fetchId:n,order:this.tmodelKeyMap[i].entryCount},this.tmodelKeyMap[i].entryCount++,e.val(a).push(void 0)),r&&this.isFetched(r)&&this.handleSuccess(this.fetchingAPIMap[n],this.cacheMap[r].result)}},{key:"removeFromTModelKeyMap",value:function(e,t){var n=this.getTModelKey(e,t);delete this.tmodelKeyMap[n]}},{key:"isLoading",value:function(e,t){var n=this.getTModelKey(e,t);return this.tmodelKeyMap[n]}},{key:"isLoadingSuccessful",value:function(e,t){var n=this.getTModelKey(e,t);return this.tmodelKeyMap[n]&&this.tmodelKeyMap[n].resultCount===this.tmodelKeyMap[n].entryCount&&0===this.tmodelKeyMap[n].errorCount}},{key:"resetLoadingError",value:function(e,t){var n=this.getTModelKey(e,t),r=this.tmodelKeyMap[n];r&&(r.errorCount=0)}},{key:"nextActiveItem",value:function(e,t){var n=this.getTModelKey(e,t),r=this.tmodelKeyMap[n];return!!r&&r.activeIndex++}},{key:"isNextLoadingItemSuccessful",value:function(e,t){var n=this.getTModelKey(e,t),r=this.tmodelKeyMap[n];if(!r)return!1;var i=this.getLoadTargetName(t),a=e.val(i);return 0===r.errorCount&&Array.isArray(a)&&s.isDefined(a[r.activeIndex])}},{key:"getLoadingItemValue",value:function(e,t){var n=e.targets[t],r=this.getTModelKey(e,t),i=this.tmodelKeyMap[r];if(i&&n){var a,o=this.getLoadTargetName(t),l=e.val(o);return l&&("onEnd"===n.fetchAction?(a=l.slice(i.accessIndex),i.accessIndex+=a.length):(a=l[i.accessIndex],i.accessIndex++)),a}}},{key:"isFetching",value:function(e){var t,n;return null!==(t=null===(n=this.fetchingAPIMap[e])||void 0===n?void 0:n.fetchingFlag)&&void 0!==t&&t}},{key:"isFetched",value:function(e){var t,n;return null!==(t=null===(n=this.cacheMap[e])||void 0===n?void 0:n.success)&&void 0!==t&&t}},{key:"getFetchingPeriod",value:function(e){return this.fetchingAPIMap[e]?s.now()-this.fetchingAPIMap[e].startTime:void 0}},{key:"fetchCache",value:function(e){return this.cacheMap[e]}},{key:"handleSuccess",value:function(e,t){var n=this,r=s.now(),i=e.fetchId,a=e.cacheId,o=e.startTime,l=e.targets,u=e.fetchMap,c={fetchingPeriod:r-o,success:!0,result:t};l.forEach((function(e){var t=e.tmodel,r=e.targetName,a=n.getTModelKey(t,r),o=n.tmodelKeyMap[a],l=n.getLoadTargetName(r);if(o){var s=o.fetchMap[i];n.callOnSuccessHandler(t,r,Oe(Oe({},c),{},{order:s.order}));var u=t.val(l);u&&(u[s.order]=c.result),t.val(r,1===(null==u?void 0:u.length)?u[0]:u),o.resultCount++,0===o.errorCount&&p.shouldActivateNextTarget(t,r)}})),delete u[i],a&&(this.cacheMap[a]=c),Qt().schedule(0,"api_success_".concat(i))}},{key:"handleError",value:function(e,t){var n=this,r=s.now(),i=e.fetchId,a=e.cacheId,o=e.startTime,l=e.targets,u=e.fetchMap;l.forEach((function(e){var a=e.tmodel,l=e.targetName,s="".concat(a.oid," ").concat(l),u=n.tmodelKeyMap[s],c=n.getLoadTargetName(l);if(u){var h=u.fetchMap[i],d={fetchingPeriod:r-o,success:!1,order:h.order,error:t},f=a.val(c);f[h.order]=d,a.val(l,1===f.length?f[0]:f),u.resultCount++,u.errorCount++,n.callOnErrorHandler(a,l)}})),delete u[i],a&&delete this.cacheMap[a],Qt().schedule(0,"api_error_".concat(i))}},{key:"callOnSuccessHandler",value:function(e,t,n){var r,i=null===(r=e.targets[t])||void 0===r?void 0:r.onSuccess;i&&("function"==typeof i?(e.setTargetMethodName(t,"onSuccess"),i.call(e,n)):Array.isArray(i)?i.forEach((function(t){return p.activateSingleTarget(e,t)})):p.activateSingleTarget(e,i))}},{key:"callOnErrorHandler",value:function(e,t){var n,r=null===(n=e.targets[t])||void 0===n?void 0:n.onError;r&&("function"==typeof r?(e.setTargetMethodName(t,"onSuccess"),r.call(e,e.val(t))):Array.isArray(r)?r.forEach((function(t){return p.activateSingleTarget(e,t)})):p.activateSingleTarget(e,r))}},{key:"ajaxAPI",value:function(e,t,n){var r=this,i={dataType:"json",type:"GET",success:function(e){return r.handleSuccess(n,e)},error:function(e){return r.handleError(n,e)}};null!=t&&t.dataType&&(i.dataType=t.dataType,delete t.dataType),null!=t&&t.requestType&&(i.type=t.requestType,delete t.requestType),d.ajax(Oe(Oe({},i),{},{url:e},{data:t}))}},{key:"loadImage",value:function(e,t){var n=this,r=new Image;r.src=e,r.onload=function(){var e={width:r.width,height:r.height,src:r.src};n.handleSuccess(t,e)},r.onerror=function(){n.handleError(t,"not found")}}}])}();function He(e){return He="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},He(e)}function Ne(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Fe(r.key),r)}}function Fe(e){var t=function(e){if("object"!=He(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=He(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==He(t)?t:t+""}function Re(e,t,n){return t=Ue(t),function(e,t){if(t&&("object"==He(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Ye()?Reflect.construct(t,n||[],Ue(e).constructor):t.apply(e,n))}function Ye(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ye=function(){return!!e})()}function Ue(e){return Ue=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ue(e)}function Be(e,t){return Be=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Be(e,t)}var Xe=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Re(this,t,["BI"])).parent=e,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Be(e,t)}(t,e),function(e,t){return t&&Ne(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"canHaveDom",value:function(){return!1}},{key:"getItemOverflowMode",value:function(){return"never"}},{key:"shouldBeBracketed",value:function(){return!1}},{key:"excludeDefaultStyling",value:function(){return!0}},{key:"isIncluded",value:function(){return!1}},{key:"getWidth",value:function(){return this.getContentWidth()}},{key:"getHeight",value:function(){return this.getContentHeight()}},{key:"getBaseWidth",value:function(){return this.bottomBaseWidth}},{key:"getContainerOverflowMode",value:function(){return this.getRealParent().getContainerOverflowMode()}},{key:"getTopBaseHeight",value:function(){return this.topBaseHeight}},{key:"isVisible",value:function(){return this.getChildren().length>0&&s.isDefined(this.getChild(0).targets.isVisible)?(H.executeDeclarativeTarget(this.getChild(0),"isVisible"),this.getChild(0).isVisible()):!!this.visibilityStatus&&this.visibilityStatus.top&&this.visibilityStatus.bottom}},{key:"getBracketThreshold",value:function(){return this.getRealParent().getBracketSize()}},{key:"addToParentVisibleChildren",value:function(){}},{key:"createViewport",value:function(){return this.viewport=this.viewport||new re,this.viewport.xNext=this.x,this.viewport.xNorth=this.x,this.viewport.xEast=this.x,this.viewport.xSouth=this.x,this.viewport.xWest=this.x,this.viewport.absX=this.getRealParent().viewport.absX,this.viewport.absY=this.getRealParent().viewport.absY,this.viewport.scrollTop=this.getRealParent().viewport.scrollTop,this.viewport.scrollLeft=this.getRealParent().viewport.scrollLeft,this.viewport.xOverflowReset=this.getRealParent().viewport.xOverflowReset,this.viewport.xOverflowLimit=this.getRealParent().viewport.xOverflowLimit,this.viewport.yNext=this.y,this.viewport.yNorth=this.y,this.viewport.yWest=this.y,this.viewport.yEast=this.y,this.viewport.ySouth=this.getRealParent().viewport.ySouth,this.viewport}},{key:"getRealParent",value:function(){return this.realParent}},{key:"calcAbsolutePosition",value:function(e,t){this.absX=e+this.getRealParent().absX,this.absY=t+this.getRealParent().absY}},{key:"shouldCalculateChildren",value:function(){var e=this.isVisible()||"new"===this.currentStatus;return this.currentStatus=void 0,e}},{key:"validateVisibilityInParent",value:function(){return this.getChildren().length>0&&this.getChild(0).validateVisibilityInParent()}},{key:"getChildren",value:function(){return this.allChildrenList}}])}(me);function $e(e){return $e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$e(e)}function We(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=_e(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){l=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(l)throw a}}}}function _e(e,t){if(e){if("string"==typeof e)return qe(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?qe(e,t):void 0}}function qe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function ze(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ze(r.key),r)}}function Ke(e,t,n){return(t=Ze(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ze(e){var t=function(e){if("object"!=$e(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=$e(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==$e(t)?t:t+""}var Ge=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return function(e,t,n){return n&&ze(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(e,0,[{key:"generate",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!e.bracketMap[t.oid]||e.pageMap[t.oid]!==t.allChildrenList||n?(e.bracketMap[t.oid]=e.buildTreeBottomUp(t,t.getChildren()),e.pageMap[t.oid]=t.allChildrenList):(t.lastChildrenUpdate.deletions.length>0&&(e.updateTreeOnDeletions(t,t.lastChildrenUpdate.deletions),e.reindexTree(t)),t.lastChildrenUpdate.additions.length>0&&e.updateTreeOnAdditions(t,t.lastChildrenUpdate.additions),(t.lastChildrenUpdate.deletions.length>0||t.lastChildrenUpdate.additions.length>0)&&e.reindexTree(t)),t.lastChildrenUpdate.additions.length=0,t.lastChildrenUpdate.deletions.length=0,e.bracketMap[t.oid]}},{key:"updateTreeOnDeletions",value:function(t,n){function r(n,i){if(n)if(i instanceof Xe&&i.parent===i.realParent){var a=e.bracketMap[t.oid],o=a.indexOf(i);o>=0&&a.splice(o,1)}else{var l=n.allChildrenList.indexOf(i);l>=0&&(n.allChildrenList.splice(l,1),0===n.allChildrenList.length&&r(n.parent,n))}}n.forEach((function(e){return r(e.bracket,e)}))}},{key:"reindexTree",value:function(t){function n(e,t){if(0===e.allChildrenList.length)return t;if(e.allChildrenList[0]instanceof Xe){e.startIndex=t;var r,i=We(e.allChildrenList);try{for(i.s();!(r=i.n()).done;)t=n(r.value,t)}catch(e){i.e(e)}finally{i.f()}e.endIndex=t}else e.startIndex=t,t+=e.allChildrenList.length,e.endIndex=t;return t}var r,i=0,a=We(e.bracketMap[t.oid]);try{for(a.s();!(r=a.n()).done;)i=n(r.value,i)}catch(e){a.e(e)}finally{a.f()}}},{key:"updateTreeOnAdditions",value:function(t,n){var r=t.getBracketSize();n.forEach((function(n){var i=n.index,a=n.child,o=e.findOrCreateBracket(t,i),l=i-o.startIndex;l<o.allChildrenList.length?o.allChildrenList.splice(l,0,a):o.allChildrenList.push(a),a.bracket=o;var s=o;for(s.startIndex=Math.min(s.startIndex,i),s.endIndex=s.startIndex+s.allChildrenList.length,s.currentStatus="new",s=o.getParent();s instanceof Xe;)s.startIndex=Math.min(s.startIndex,i),s.endIndex=Math.max(s.endIndex,i+1),s.currentStatus="new",s=s.getParent();o.allChildrenList.length>r&&e.splitBracket(t,o)}))}},{key:"splitBracket",value:function(t,n){for(var r=n.allChildrenList,i=t.getBracketSize(),a=[],o=n.startIndex,l=0;l<r.length;l+=i){var s=r.slice(l,l+i),u=o+s.length,c=e.createBracket(t,o,u,s);c.parent=n.parent,o=c.endIndex,a.push(c)}if(n.parent!==n.realParent){var h,d=n.parent.allChildrenList.indexOf(n);if(d>=0&&(h=n.parent.allChildrenList).splice.apply(h,[d,1].concat(a)),n.parent.allChildrenList.length>=i){var f=e.buildTreeBottomUp(t,n.parent.allChildrenList);if(n.parent.allChildrenList=f,n.parent.parent){var v,y=n.parent.parent.allChildrenList.indexOf(n.parent);y>=0&&(v=n.parent.parent.allChildrenList).splice.apply(v,[y,1].concat(function(e){return function(e){if(Array.isArray(e))return qe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||_e(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(f)))}}}else{var g=e.bracketMap[t.oid],p=g.indexOf(n);p>=0&&g.splice.apply(g,[p,1].concat(a)),g.length>t.getBracketSize()&&(e.bracketMap[t.oid]=e.buildTreeBottomUp(t,g))}}},{key:"findOrCreateBracket",value:function(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.bracketMap[t.oid],a=We(i);try{for(a.s();!(r=a.n()).done;){var o=r.value;if(o.startIndex<=n&&o.endIndex>=n)return o.getFirstChild()instanceof Xe?e.findOrCreateBracket(t,n,o.allChildrenList):o}}catch(e){a.e(e)}finally{a.f()}var l=e.createBracket(t,n,n);if(i.push(l),i.length>t.getBracketSize()){var s=e.buildTreeBottomUp(t,i);e.bracketMap[t.oid].brackets=s}return l}},{key:"buildTreeBottomUp",value:function(t,n){for(var r=n.length,i=t.getBracketSize(),a=[],o=function(){var r=n.slice(l,l+i),o=r[0]instanceof Xe,s=o?r[0].startIndex:l,u=o?r[r.length-1].endIndex:l+r.length,c=e.createBracket(t,s,u,r);o&&r.forEach((function(e){e.parent=c})),a.push(c)},l=0;l<r;l+=i)o();return a.length>i?e.buildTreeBottomUp(t,a):a}},{key:"createBracket",value:function(t,n,r,i){var a=new Xe(t);return a.realParent=t,a.allChildrenList=i||a.allChildrenList,a.startIndex=n,a.endIndex=r,a.allChildrenList.forEach((function(e){e instanceof Xe?(e.realParent=t,e.parent=a):e.bracket=a})),e.all[a.oid]=a,a}}])}();function Qe(e){return Qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qe(e)}function Je(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return et(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?et(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){l=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(l)throw a}}}}function et(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function tt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,nt(r.key),r)}}function nt(e){var t=function(e){if("object"!=Qe(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Qe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Qe(t)?t:t+""}Ke(Ge,"bracketMap",{}),Ke(Ge,"pageMap",{}),Ke(Ge,"all",{});var rt=function(){return function(e,t){return t&&tt(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.hasLocationList=[],this.hasLocationMap={},this.visibleChildrenLengthMap={},this.updatedContainerMap={},this.locationListStats=[],this.activatedList=[],this.activatedMap={}}),[{key:"clear",value:function(){this.visibleChildrenLengthMap={},this.updatedContainerMap={},this.activatedList=[],this.activatedMap={}}},{key:"calculateAll",value:function(){var e=this;this.hasLocationList.length=0,this.hasLocationMap={},this.locationListStats=[],this.startTime=s.now(),this.calculate(),Object.keys(this.visibleChildrenLengthMap).forEach((function(t){var n=e.visibleChildrenLengthMap[t],r=n.tmodel,i=n.length;!r.isVisible()||i===r.visibleChildren.length&&0!==r.visibleChildren.length||(e.runEventTargets(r,"onVisibleChildrenChange"),e.visibleChildrenLengthMap[t].length=r.visibleChildren.length)})),Object.keys(this.updatedContainerMap).forEach((function(t){var n=e.updatedContainerMap[t];n.isVisible()&&(e.runEventTargets(n,"onChildrenChange"),delete e.updatedContainerMap[t])}))}},{key:"calculate",value:function(){this.calculateContainer(Nt.tRoot)}},{key:"calculateActivated",value:function(){for(var e=this,t=0,n=function(){var n=e.activatedList[t++];Nt.targetManager.applyTargetValues(n,n.activatedTargets),n.updatingTargetList.length>0&&Nt.targetManager.setActualValues(n,n.updatingTargetList.filter((function(e){return 0===n.getTargetStep(e)}))),e.hasLocationMap[n.oid]||e.addToLocationList(n),n.activatedTargets.length=0};t<this.activatedList.length;)n();this.activatedList.length=0,this.activatedMap={}}},{key:"getChildren",value:function(e){return e.getChildren(),e.shouldBeBracketed()?Ge.generate(e):(e.lastChildrenUpdate.additions.length=0,e.lastChildrenUpdate.deletions.length=0,Ge.bracketMap[e.oid]&&(delete Ge.bracketMap[e.oid],delete Ge.pageMap[e.oid]),e.getChildren())}},{key:"calculateContainer",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this.getChildren(e),i=e.createViewport();e.childrenUpdateFlag&&(e.childrenUpdateFlag=!1,e.targets.onChildrenChange&&(this.updatedContainerMap[e.oid]=e)),e.visibleChildren.length=0;var a,o=Je(r);try{var l=function(){var r=a.value;if(!r)return 1;t.locationListStats.push(r.oid),i.setCurrentChild(r),i.setLocation(),r.isIncluded()&&e.manageChildTargetExecution(r,n)&&t.calculateTargets(r),("always"===e.getContainerOverflowMode()||"always"===r.getItemOverflowMode()||"auto"===e.getContainerOverflowMode()&&"auto"===r.getItemOverflowMode()&&i.isOverflow())&&(i.overflow(),i.setLocation()),r.isIncluded()&&(r.targets.onVisibleChildrenChange&&!t.visibleChildrenLengthMap[r.oid]&&(t.visibleChildrenLengthMap[r.oid]={tmodel:r,length:r.visibleChildren.length}),t.addToLocationList(r)),r.getCoreTargets().forEach((function(e){!r.isTargetEnabled(e)||r.isTargetUpdating(e)||r.isTargetImperative(e)||H.executeDeclarativeTarget(r,e,r.getTargetCycle(e))})),(r.isTargetImperative("x")||r.targets.x)&&s.isDefined(r.targetValues.x)||r.val("x",r.x),(r.isTargetImperative("y")||r.targets.y)&&s.isDefined(r.targetValues.y)||r.val("y",r.y),r.calcAbsolutePosition(r.getX(),r.getY()),r.excludeDefaultStyling()||(r.addToStyleTargetList("x"),r.addToStyleTargetList("y"));var o=r.visibilityStatus,l=!!o&&o.left&&o.right&&o.top&&o.bottom,u=r.isVisible(),c=!1;s.isDefined(r.targets.isVisible)&&!s.isDefined(r.targets.onVisible)||(c=r.calcVisibility()),s.isDefined(r.targets.isVisible)&&H.executeDeclarativeTarget(r,"isVisible"),r.isNowVisible=!l&&c||!u&&r.isVisible(),r.addToParentVisibleChildren(),r.shouldCalculateChildren()&&t.calculateContainer(r,n&&!1!==e.shouldCalculateChildTargets()),!r.isTargetImperative("height")&&!s.isDefined(r.targets.height)&&!s.isDefined(r.targets.heightFromDom)&&r.getContentHeight()>0&&(r.val("height",r.getContentHeight()),r.addToStyleTargetList("height")),!r.isTargetImperative("width")&&!s.isDefined(r.targets.width)&&!s.isDefined(r.targets.widthFromDom)&&r.getContentWidth()>0&&(r.val("width",r.getContentWidth()),r.addToStyleTargetList("width")),r.isInFlow()&&(s.isNumber(r.val("appendNewLine"))?(i.appendNewLine(),e.calcContentWidthHeight()):(e.calcContentWidthHeight(),i.nextLocation()))};for(o.s();!(a=o.n()).done;)l()}catch(e){o.e(e)}finally{o.f()}e.calcContentWidthHeight();var u,c=Je(r);try{for(c.s();!(u=c.n()).done;){var h=u.value;this.checkExternalEvents(h)}}catch(e){c.e(e)}finally{c.f()}}},{key:"calculateTargets",value:function(e){this.checkInternalEvents(e),Nt.targetManager.applyTargetValues(e),Nt.targetManager.setActualValues(e),e.hasDom()&&q.shouldMeasureWidthFromDom(e)&&q.setWidthFromDom(e),e.hasDom()&&q.shouldMeasureHeightFromDom(e)&&q.setHeightFromDom(e),e.isNowVisible=!1,e.hasDomNow=!1,e.targetExecutionCount++}},{key:"checkExternalEvents",value:function(e){var t=[],n=M.allEventMap;e.getExternalEventList().forEach((function(r){n[r](e)&&t.push(r)})),this.runEventTargets(e,t)}},{key:"checkInternalEvents",value:function(e){var t=[],n=M.internalEventMap;e.getInternalEventList().forEach((function(r){n[r](e)&&t.push(r)})),this.runEventTargets(e,t)}},{key:"runEventTargets",value:function(e,t){Array.isArray(t)||(t=[t]);var n=_t().getEventTarget();t.forEach((function(t){var r=e.targets[t];if(e.isTargetEnabled(t)){if("function"==typeof r.value){var i=r.value.call(e,n);Array.isArray(i)?i.forEach((function(t){return p.activateSingleTarget(e,t)})):"string"==typeof i&&p.activateSingleTarget(e,i)}else Array.isArray(r.value)?r.value.forEach((function(t){return p.activateSingleTarget(e,t)})):Array.isArray(r)?r.forEach((function(t){return p.activateSingleTarget(e,t)})):p.activateSingleTarget(e,r.value);p.shouldActivateNextTarget(e,t)}}))}},{key:"addToLocationList",value:function(e){this.hasLocationMap[e.oid]||(this.hasLocationList.push(e),this.hasLocationMap[e.oid]=e)}},{key:"addToActivatedList",value:function(e){this.activatedMap[e.oid]||(this.activatedList.push(e),this.activatedMap[e.oid]=e)}},{key:"isActivated",value:function(e){return this.activatedMap[e.oid]}}])}();function it(e){return it="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},it(e)}function at(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ot(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?at(Object(n),!0).forEach((function(t){lt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):at(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function lt(e,t,n){return(t=ft(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function st(){st=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var a=t&&t.prototype instanceof p?t:p,o=Object.create(a.prototype),l=new P(r||[]);return i(o,"_invoke",{value:C(e,n,l)}),o}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=c;var d="suspendedStart",f="suspendedYield",v="executing",y="completed",g={};function p(){}function m(){}function b(){}var T={};u(T,o,(function(){return this}));var w=Object.getPrototypeOf,k=w&&w(w(O([])));k&&k!==n&&r.call(k,o)&&(T=k);var S=b.prototype=p.prototype=Object.create(T);function E(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function M(e,t){function n(i,a,o,l){var s=h(e[i],e,a);if("throw"!==s.type){var u=s.arg,c=u.value;return c&&"object"==it(c)&&r.call(c,"__await")?t.resolve(c.__await).then((function(e){n("next",e,o,l)}),(function(e){n("throw",e,o,l)})):t.resolve(c).then((function(e){u.value=e,o(u)}),(function(e){return n("throw",e,o,l)}))}l(s.arg)}var a;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return a=a?a.then(i,i):i()}})}function C(t,n,r){var i=d;return function(a,o){if(i===v)throw Error("Generator is already running");if(i===y){if("throw"===a)throw o;return{value:e,done:!0}}for(r.method=a,r.arg=o;;){var l=r.delegate;if(l){var s=x(l,r);if(s){if(s===g)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===d)throw i=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=v;var u=h(t,n,r);if("normal"===u.type){if(i=r.done?y:f,u.arg===g)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i=y,r.method="throw",r.arg=u.arg)}}}function x(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,x(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var a=h(i,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,g;var o=a.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function D(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function O(t){if(t||""===t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(it(t)+" is not iterable")}return m.prototype=b,i(S,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:m,configurable:!0}),m.displayName=u(b,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u(e,s,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},E(M.prototype),u(M.prototype,l,(function(){return this})),t.AsyncIterator=M,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var o=new M(c(e,n,r,i),a);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},E(S),u(S,s,"Generator"),u(S,o,(function(){return this})),u(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=O,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(D),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return l.type="throw",l.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],l=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),D(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;D(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:O(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}function ut(e){return function(e){if(Array.isArray(e))return ct(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return ct(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ct(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ct(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function ht(e,t,n,r,i,a,o){try{var l=e[a](o),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,i)}function dt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ft(r.key),r)}}function ft(e){var t=function(e){if("object"!=it(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=it(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==it(t)?t:t+""}var vt=function(){return function(e,t){return t&&dt(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.lastLink=s.getFullLink(document.URL),this.pageCache={}}),[{key:"openPage",value:(e=st().mark((function e(t){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Nt.stop();case 2:Nt.reset(),t=s.getFullLink(t),this.pageCache[t]?(Nt.tRoot=this.pageCache[t].tRoot,Xt.oids=this.pageCache[t].oids,Nt.tRoot.$dom=new d("#tgjs-root"),Nt.tRoot.$dom.innerHTML(this.pageCache[t].html),s.initDoms(this.pageCache[t].visibleList),this.pageCache[t].visibleList.forEach((function(e){e.visibilityStatus=void 0})),Nt.manager.lists.visible=ut(this.pageCache[t].visibleList),this.lastLink=t,Nt.start()):(Nt.tRoot.hasDom()&&Nt.tRoot.$dom.innerHTML(""),Nt.tRoot=Nt.tRootFactory(),Xt.oids={},Nt.pageIsEmpty=!0,this.lastLink=t,Nt.start());case 5:case"end":return e.stop()}}),e,this)})),t=function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){ht(a,r,i,o,l,"next",e)}function l(e){ht(a,r,i,o,l,"throw",e)}o(void 0)}))},function(e){return t.apply(this,arguments)})},{key:"openLinkFromHistory",value:function(e){e.link?(this.onPageClose(),this.openLink(e.link,!1)):e.browserUrl&&(history.replaceState({link:e.browserUrl},"",e.browserUrl),this.openPage(e.browserUrl))}},{key:"onPageClose",value:function(){Nt.resizeLastUpdate=s.now(),_t().resizeRoot(),Nt.manager.lists.visible.forEach((function(e){Jt().runEventTargets(e,["onPageClose"])}))}},{key:"openLink",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e=s.getFullLink(e),this.lastLink){Nt.tRoot.$dom=new d("#tgjs-root");var n=Nt.tRoot.$dom.innerHTML();this.onPageClose(),this.pageCache[this.lastLink]={link:this.lastLink,html:n,oids:ot({},Xt.oids),visibleList:ut(Nt.manager.lists.visible),tRoot:Nt.tRoot}}t&&history.pushState({link:e},"",e),this.openPage(e),Qt().schedule(0,"pagemanager-processOpenLink")}},{key:"updateBrowserUrl",value:function(e){window.history.state.browserUrl?history.replaceState({browserUrl:e},"",e):(Nt.tRoot.$dom=new d("#tgjs-root"),this.pageCache[document.URL]={link:document.URL,htms:Nt.tRoot.$dom.innerHTML(),oids:ot({},Xt.oids),visibleList:ut(Nt.manager.lists.visible),tRoot:Nt.tRoot},history.pushState({browserUrl:e},"",e)),Qt().schedule(0,"pagemanager-processUpdateBrowserUrl")}},{key:"back",value:function(){return history.back()}}]);var e,t}();function yt(e){return yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yt(e)}function gt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gt(Object(n),!0).forEach((function(t){mt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function mt(e,t,n){return(t=Et(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bt(e){return function(e){if(Array.isArray(e))return kt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||wt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Tt(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=wt(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){l=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(l)throw a}}}}function wt(e,t){if(e){if("string"==typeof e)return kt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?kt(e,t):void 0}}function kt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function St(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Et(r.key),r)}}function Et(e){var t=function(e){if("object"!=yt(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=yt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==yt(t)?t:t+""}var Mt=function(){return function(e,t){return t&&St(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.init()}),[{key:"init",value:function(){this.lists={visible:[],rerender:[],restyle:[],reasyncStyle:[],reattach:[],relocation:[],invisibleDom:[],noDom:[],updatingTModels:[],activeTModels:[],updatingTargets:[],activeTargets:[]},this.visibleTypeMap={},this.visibleOidMap={},this.targetMethodMap={},this.noDomMap={},this.doneTargets=[]}},{key:"clear",value:function(){this.lists.visible.length=0,this.lists.rerender.length=0,this.lists.restyle.length=0,this.lists.reasyncStyle.length=0,this.lists.reattach.length=0,this.lists.relocation.length=0,this.lists.noDom.length=0,this.lists.updatingTModels.length=0,this.lists.activeTModels.length=0,this.lists.updatingTargets.length=0,this.lists.activeTargets.length=0,this.visibleTypeMap={},this.visibleOidMap={},this.targetMethodMap={},this.noDomMap={}}},{key:"analyze",value:function(){var e,t=s.list2map(this.lists.visible);this.clear();var n,r=Tt(Jt().hasLocationList);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.getParent()||i.getParent().allChildrenMap[i.oid]){var a=i.isVisible();a&&(t[i.oid]=null,!i.hasDom()||i.canHaveDom()||this.lists.invisibleDom.includes(i)||this.lists.invisibleDom.push(i),this.lists.visible.push(i),this.visibleOidMap[i.oid]=i,this.visibleTypeMap[i.type]||(this.visibleTypeMap[i.type]=[]),this.visibleTypeMap[i.type].push(i)),(a||i.isActivated())&&(this.needsRerender(i),this.needsRestyle(i),this.needsReattach(i),this.needsRelocation(i),i.updatingTargetList.length>0&&(this.lists.updatingTModels.push(i),this.lists.updatingTargets=[].concat(bt(this.lists.updatingTargets),bt(i.updatingTargetList))),i.activeTargetList.length>0&&(this.lists.activeTModels.push(i),this.lists.activeTargets=[].concat(bt(this.lists.activeTargets),bt(i.activeTargetList))),i.activeChildrenList.length>0&&(this.lists.activeTModels=[].concat(bt(this.lists.activeTModels),bt(i.activeChildrenList))),Object.keys(i.targetMethodMap).length>0&&(this.targetMethodMap[i.oid]=pt({},i.targetMethodMap),i.targetMethodMap={}),i.deactivate()),!a&&i.canDeleteDom()||!i.canHaveDom()||i.hasDom()||this.noDomMap[i.oid]||(this.lists.noDom.push(i),this.noDomMap[i.oid]=!0)}else i.hasDom()&&!this.lists.invisibleDom.includes(i)&&this.lists.invisibleDom.push(i)}}catch(e){r.e(e)}finally{r.f()}var o=Object.values(t).filter((function(e){var t;return null!==e&&e.hasDom()&&(e.canDeleteDom()||!(null!==(t=e.getParent())&&void 0!==t&&t.allChildrenMap[e.oid]))}));return(e=this.lists.invisibleDom).push.apply(e,bt(o)),this.lists.noDom.length>0?0:this.lists.reattach.length>0?1:this.lists.relocation.length>0?2:this.lists.rerender.length>0?3:this.lists.reasyncStyle.length>0?4:this.lists.invisibleDom.length>0?5:this.lists.restyle.length>0?10:-1}},{key:"needsRelocation",value:function(e){return!(!e.hasDom()||!s.isDefined(e.domOrderIndex)||(this.lists.relocation.push(e),0))}},{key:"needsRerender",value:function(e){return!(!e.hasDom()||!s.isDefined(e.getHtml())||e.$dom.html()===e.getHtml()&&e.$dom.textOnly===e.isTextOnly()||(this.lists.rerender.push(e),0))}},{key:"needsRestyle",value:function(e){e.hasDom()&&(e.styleTargetList.length>0&&this.lists.restyle.push(e),e.asyncStyleTargetList.length>0&&this.lists.reasyncStyle.push(e))}},{key:"needsReattach",value:function(e){e.hasDom()&&!e.reuseDomDefinition()&&(e.hasDomHolderChanged()||e.hasBaseElementChanged())&&this.lists.reattach.push(e)}},{key:"renderTModels",value:function(){var e,t=Tt(this.lists.rerender);try{for(t.s();!(e=t.n()).done;){var n,r,i=e.value;i.isTextOnly()?null===(n=i.$dom)||void 0===n||n.text(i.getHtml()):null===(r=i.$dom)||void 0===r||r.html(i.getHtml()),i.setActualValueLastUpdate("html"),i.domHeightTimestamp=0,i.domWidthTimestamp=0}}catch(e){t.e(e)}finally{t.f()}}},{key:"reattachTModels",value:function(){var e,t=Tt(this.lists.reattach);try{for(t.s();!(e=t.n()).done;){var n,r=e.value;null===(n=r.$dom)||void 0===n||n.detach(),r.hasBaseElementChanged()&&q.createDom(r),r.getDomHolder(r)&&r.getDomHolder(r).appendTModel$Dom(r)}}catch(e){t.e(e)}finally{t.f()}}},{key:"relocateTModels",value:function(){this.lists.relocation.sort((function(e,t){return t.domOrderIndex-e.domOrderIndex}));var e,t=Tt(this.lists.relocation);try{for(t.s();!(e=t.n()).done;){var n=e.value;n.getDomParent().$dom.relocate(n,n.domOrderIndex),n.domOrderIndex=void 0}}catch(e){t.e(e)}finally{t.f()}}},{key:"deleteDoms",value:function(){var e,t=Tt(this.lists.invisibleDom);try{for(t.s();!(e=t.n()).done;){var n,r=e.value;r.styleMap={},r.transformMap={},r.val("isVisible",!1),r.hasDomNow=!1,null===(n=r.$dom)||void 0===n||n.detach(),r.$dom=null}}catch(e){t.e(e)}finally{t.f()}this.lists.invisibleDom.length=0}},{key:"fixStyles",value:function(){var e,t=Tt(this.lists.restyle);try{for(t.s();!(e=t.n()).done;){var n=e.value;n.hasDom()&&q.fixStyle(n)}}catch(e){t.e(e)}finally{t.f()}}},{key:"fixAsyncStyles",value:function(){var e,t=Tt(this.lists.reasyncStyle);try{for(t.s();!(e=t.n()).done;){var n=e.value;n.hasDom()&&q.fixAsyncStyle(n)}}catch(e){t.e(e)}finally{t.f()}}},{key:"completeDoneTModels",value:function(){this.doneTargets.forEach((function(e){var t=e.tmodel,n=e.key;t.isTargetDone(n)&&(t.setTargetComplete(n),t.removeFromActiveTargets(n),t.removeFromUpdatingTargets(n))}))}},{key:"createDoms",value:function(){if(0!==this.lists.noDom.length){var e=[];this.lists.noDom.sort((function(e,t){return e.getUIDepth()<t.getUIDepth()?-1:1}));var t,n=Tt(this.lists.noDom);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=void 0;d.query("#".concat(r.oid))?(i=new d("#".concat(r.oid)),r.$dom=i,r.hasDomNow=!0,this.needsRestyle(r)):e.push(r)}}catch(e){n.e(e)}finally{n.f()}for(var a=0,o=e;a<o.length;a++){var l,s=o[a];null!==(l=s.getDomHolder(s))&&void 0!==l&&l.exists()&&(s.val("$dom")?s.$dom=s.val("$dom"):(s.$dom=new d,q.createDom(s)),s.getDomHolder(s).appendTModel$Dom(s),s.hasDomNow=!0)}_t().attachEvents(this.lists.noDom)}}}])}();function Ct(e){return Ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ct(e)}function xt(){xt=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var a=t&&t.prototype instanceof p?t:p,o=Object.create(a.prototype),l=new P(r||[]);return i(o,"_invoke",{value:C(e,n,l)}),o}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=c;var d="suspendedStart",f="suspendedYield",v="executing",y="completed",g={};function p(){}function m(){}function b(){}var T={};u(T,o,(function(){return this}));var w=Object.getPrototypeOf,k=w&&w(w(O([])));k&&k!==n&&r.call(k,o)&&(T=k);var S=b.prototype=p.prototype=Object.create(T);function E(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function M(e,t){function n(i,a,o,l){var s=h(e[i],e,a);if("throw"!==s.type){var u=s.arg,c=u.value;return c&&"object"==Ct(c)&&r.call(c,"__await")?t.resolve(c.__await).then((function(e){n("next",e,o,l)}),(function(e){n("throw",e,o,l)})):t.resolve(c).then((function(e){u.value=e,o(u)}),(function(e){return n("throw",e,o,l)}))}l(s.arg)}var a;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return a=a?a.then(i,i):i()}})}function C(t,n,r){var i=d;return function(a,o){if(i===v)throw Error("Generator is already running");if(i===y){if("throw"===a)throw o;return{value:e,done:!0}}for(r.method=a,r.arg=o;;){var l=r.delegate;if(l){var s=x(l,r);if(s){if(s===g)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===d)throw i=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=v;var u=h(t,n,r);if("normal"===u.type){if(i=r.done?y:f,u.arg===g)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i=y,r.method="throw",r.arg=u.arg)}}}function x(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,x(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var a=h(i,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,g;var o=a.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function D(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function O(t){if(t||""===t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(Ct(t)+" is not iterable")}return m.prototype=b,i(S,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:m,configurable:!0}),m.displayName=u(b,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u(e,s,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},E(M.prototype),u(M.prototype,l,(function(){return this})),t.AsyncIterator=M,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var o=new M(c(e,n,r,i),a);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},E(S),u(S,s,"Generator"),u(S,o,(function(){return this})),u(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=O,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(D),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return l.type="throw",l.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],l=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),D(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;D(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:O(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}function Lt(e,t,n,r,i,a,o){try{var l=e[a](o),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,i)}function Dt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Pt(r.key),r)}}function Pt(e){var t=function(e){if("object"!=Ct(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Ct(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ct(t)?t:t+""}var Ot=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.nextRuns=[],this.domProcessing=0,this.runningFlag=!1,this.runId="",this.runStartTime=void 0,this.rerunId="",this.delayProcess=void 0,this.resetting=!1,this.activeStartTime=void 0}return function(e,t){return t&&Dt(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}(e,[{key:"resetRuns",value:(t=xt().mark((function e(){var t;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.resetting=!0,e.next=3,new Promise((function(e){return requestAnimationFrame(e)}));case 3:null!==(t=this.delayProcess)&&void 0!==t&&t.timeoutId&&clearTimeout(this.delayProcess.timeoutId),this.nextRuns=[],this.domProcessing=0,this.runningFlag=!1,this.runId="",this.runStartTime=void 0,this.rerunId="",this.delayProcess=void 0,this.resetting=!1,this.activeStartTime=void 0;case 13:case"end":return e.stop()}}),e,this)})),n=function(){var e=this,n=arguments;return new Promise((function(r,i){var a=t.apply(e,n);function o(e){Lt(a,r,i,o,l,"next",e)}function l(e){Lt(a,r,i,o,l,"throw",e)}o(void 0)}))},function(){return n.apply(this,arguments)})},{key:"schedule",value:function(e,t){!Nt.isRunning()||this.resetting||0===e&&this.rerunId||(0===e&&0===Nt.throttle?this.run(e,t):this.delayRun(0===Nt.throttle?e||0:Nt.throttle,t))}},{key:"run",value:function(e,t){if(Nt.isRunning()&&!this.resetting)if(this.runningFlag)this.rerunId||(this.rerunId="rerun ".concat(t));else{this.rerunId="",this.runId=t,this.runningFlag=!0,this.runStartTime=s.now(),_t().captureEvents(),Gt().doneTargets.length>0&&(Gt().completeDoneTModels(),Gt().doneTargets.length=0),Nt.targetManager.applyTargetValues(Nt.tRoot),Jt().calculateAll(),Jt().calculateActivated(),Nt.events.resetEventsOnTimeout();var n,r=Nt.manager.analyze();r>=0&&(0===this.domProcessing?this.domOperations(r):this.rerunId||(this.rerunId="domrun ".concat(t))),1===Nt.debugLevel&&s.log(!0)("Request from: ".concat(t," delay: ").concat(e," runningStep:").concat(r," dom:").concat(this.domProcessing," runs:").concat(this.nextRuns.length," D:").concat(null===(n=this.delayProcess)||void 0===n?void 0:n.delay)),0===this.domProcessing&&this.needsRerun()}}},{key:"needsRerun",value:function(){if(this.runningFlag=!1,this.rerunId)this.schedule(1,"rerun-".concat(this.rerunId));else{var e=this.nextRuns.length>0?this.nextRuns[0].delay-(s.now()-this.nextRuns[0].insertTime):void 0;if(void 0===e){if(_t().eventQueue.length>0)this.schedule(15,"events-".concat(_t().eventQueue.length));else if(Gt().lists.updatingTModels.length>0)this.schedule(15,"getManager-needsRerun-updatingTModels");else if(Gt().lists.activeTModels.length>0){var t=Gt().lists.activeTModels.find((function(e){return 0===e.targetExecutionCount||e.activeTargetList.some((function(t){return e.shouldScheduleRun(t)}))}));if(t){var n=!this.activeStartTime||s.now()-this.activeStartTime>15?1:15;this.activeStartTime=s.now(),this.schedule(n,"getManager-needsRerun-".concat(t.oid,"-").concat(t.activeTargetList))}}}else e<0&&e>=-15&&this.executeNextRun()}}},{key:"domOperations",value:function(t){var n=this;this.domProcessing=1,10===t?this.domFixStyles():Promise.all(e.domSteps.filter((function(e,n){return n>=t})).map((function(e){return Promise.resolve().then(e)}))).then((function(){Gt().lists.restyle.length?n.domFixStyles():(n.domProcessing=0,n.needsRerun())}))}},{key:"domFixStyles",value:function(){var e=this;this.domProcessing=2,requestAnimationFrame((function(){Gt().fixStyles(),e.domProcessing=0,e.needsRerun()}))}},{key:"setDelayProcess",value:function(e,t,n,r){var i=this;r>0?this.delayProcess={runId:e,insertTime:t,runTime:n,delay:r,timeoutId:setTimeout((function(){i.run(r,e),i.executeNextRun()}),r)}:(this.delayProcess={runId:e,insertTime:t,runTime:n,delay:0},this.run(r,e),this.executeNextRun())}},{key:"executeNextRun",value:function(){for(var e=null,t=null;this.nextRuns.length>0;){var n=this.nextRuns.shift(),r=s.now();if(!(n.delay-(r-n.insertTime)<0)){t=n;break}e=n}if(e)this.setDelayProcess(e.runId,e.insertTime,s.now(),0);else if(t){var i=s.now(),a=Math.max(1,t.delay-(i-t.insertTime));this.setDelayProcess(t.runId,t.insertTime,i+a,a)}else this.delayProcess=void 0}},{key:"delayRun",value:function(e,t){var n=this.runStartTime,r=n+e;this.delayProcess?this.delayProcess.timeoutId&&r<this.delayProcess.runTime?(clearTimeout(this.delayProcess.timeoutId),this.insertRun(this.delayProcess.runId,this.delayProcess.insertTime,this.delayProcess.delay),this.setDelayProcess(t,n,r,e)):this.insertRun(t,n,e):this.setDelayProcess(t,n,r,e)}},{key:"insertRun",value:function(e,t,n){for(var r=0,i=this.nextRuns.length;r<i;){var a=Math.floor((r+i)/2),o=this.nextRuns[a].delay,l=this.nextRuns[a].insertTime+o-(t+n);if(l>0)i=a;else{if(!(l<0))return;r=a+1}}this.nextRuns.splice(r,0,{runId:e,insertTime:t,delay:n})}}]);var t,n}();function jt(e){return jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jt(e)}function At(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return It(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?It(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){l=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(l)throw a}}}}function It(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Vt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ht(r.key),r)}}function Ht(e){var t=function(e){if("object"!=jt(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=jt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==jt(t)?t:t+""}!function(e,t,n){(t=Pt(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Ot,"domSteps",[function(){return Gt().createDoms()},function(){return Gt().reattachTModels()},function(){return Gt().relocateTModels()},function(){return Gt().renderTModels()},function(){return Gt().fixAsyncStyles()},function(){Gt().lists.invisibleDom.length>0&&Gt().deleteDoms()}]);var Nt,Ft=function(){return function(e,t){return t&&Vt(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}),[{key:"applyTargetValues",value:function(e){var t,n=At(arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.activeTargetList.slice(0));try{for(n.s();!(t=n.n()).done;){var r=t.value;e.isTargetImperative(r)||this.applyTargetValue(e,r)}}catch(e){n.e(e)}finally{n.f()}}},{key:"applyTargetValue",value:function(e,t){var n=e.targets[t];if(s.isDefined(n)){if(!e.isExecuted(t)||!e.hasUpdatingTargets(t)){if(e.isExecuted(t)&&e.getTargetStep(t)===e.getTargetSteps(t)){if(e.isScheduledPending(t)&&Qt().nextRuns.length>0)return;var r=p.scheduleExecution(e,t);if(r>0)return void Qt().schedule(r,"targetSchedule__".concat(e.oid,"__").concat(t,"_").concat(r))}if(e.isTargetEnabled(t))if(e.resetScheduleTimeStamp(t),e.shouldExecuteCyclesInParallel(t)){var i;i=e.isExecuted(t)?e.getTargetCycles(t):"function"==typeof n.cycles?n.cycles.call(e,0):n.cycles||0;for(var a=[],o=function(n){a.push(new Promise((function(r){H.executeDeclarativeTarget(e,t,n),r()})))},l=0;l<=i;l++)o(l);Promise.all(a).then((function(){e.targetValues[t].cycle=i,e.updateTargetStatus(t),e.shouldScheduleRun(t)&&Qt().schedule(e.getTargetInterval(t),"targetSchedule__".concat(e.oid,"__").concat(t,"_rerun"))}))}else e.isExecuted(t)&&e.getTargetCycles(t)>0&&(e.getTargetCycle(t)<e.getTargetCycles(t)?e.incrementTargetCycle(t,e.getTargetCycle(t)):e.resetTargetCycle(t),e.resetTargetStep(t),e.resetTargetInitialValue(t)),H.executeDeclarativeTarget(e,t);else n.needsReactivation&&e.removeFromActiveTargets(t)}}else e.removeFromActiveTargets(t)}},{key:"setActualValues",value:function(e){var t,n=0,r=At(arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.updatingTargetList.slice(0));try{for(r.s();!(t=r.n()).done;){var i=t.value,a=e.getScheduleTimeStamp(i),o=e.getTargetInterval(i);if(a&&a+o>s.now()){var l=Qt().nextRuns.length>0?Qt().nextRuns[0]:void 0;if(l&&l.delay+l.insertTime<a+o)continue}(n=p.scheduleExecution(e,i))>0?Qt().schedule(n,"setActualValues-".concat(e.oid,"__").concat(i,"_").concat(n)):(e.resetScheduleTimeStamp(i),this.setActualValue(e,i))}}catch(e){r.e(e)}finally{r.f()}}},{key:"findOriginalTModel",value:function(e,t){return ce.findParentByTarget(e,t)||rn().find((function(e){return e.targets[t]}))}},{key:"setActualValue",value:function(e,t){var n=e.targetValues[t];if(n)if(e.isTargetImperative(t)||e.isTargetEnabled(t)){var r,i,a,o=e.getTargetValue(t),l=e.getTargetStep(t),u=e.getTargetSteps(t),c=e.getTargetCycle(t),h=e.getTargetInterval(t),d=e.val(t),f=l,v=c,y=e.getTargetInitialValue(t),g=s.capitalizeFirstLetter(t),m=e.getActualValueLastUpdate(t),b=s.now();if(l<=u&&(s.isDefined(y)||(y=s.isDefined(e.val(t))?e.val(t):"number"==typeof o?0:void 0,e.setTargetInitialValue(t,y)),e.val(t,q.morph(e,t,y,o,l,u)),e.addToStyleTargetList(t),e.setActualValueLastUpdate(t),e.setTargetMethodName(t,"value"),e.isTargetImperative(t)?(r=n.originalTargetName,a=e,(i=e.targets[n.originalTargetName])||(i=(a=this.findOriginalTModel(e,r))?a.targets[n.originalTargetName]:null),i&&"function"==typeof i["on".concat(g,"Step")]?(i["on".concat(g,"Step")].call(a,a.val(t),o,l,u),a.setTargetMethodName(r,["on".concat(g,"Step")])):i&&"function"==typeof i.onImperativeStep&&(i.onImperativeStep.call(a,t,a.val(t),o,l,u),a.setTargetMethodName(r,"onImperativeStep"))):p.handleValueChange(e,t,e.val(t),d,f,v),e.incrementTargetStep(t,b,m,h,u),e.updateTargetStatus(t),e.getTargetStep(t)<u))return p.shouldActivateNextTarget(e,t),void Qt().schedule(h,"".concat(e.oid,"---").concat(t,"-").concat(l,"/").concat(u,"-").concat(c,"-").concat(h));e.val(t,o),e.addToStyleTargetList(t),e.setActualValueLastUpdate(t),l=e.getTargetStep(t);var T=0;n.valueList&&c<n.valueList.length-1?(e.incrementTargetCycle(t,e.getTargetCycle(t)),c=e.getTargetCycle(t),e.resetTargetStep(t),n.initialValue=n.value,n.value=n.valueList[c],n.steps=n.stepList[(c-1)%n.stepList.length],n.interval=n.intervalList[(c-1)%n.intervalList.length],n.easing=n.easingList[(c-1)%n.easingList.length],T=h):e.isTargetImperative(t)?(r=n.originalTargetName,a=e,(i=e.targets[n.originalTargetName])||(i=(a=this.findOriginalTModel(e,r))?a.targets[n.originalTargetName]:null),i&&"function"==typeof i["on".concat(g,"Step")]?(i["on".concat(g,"Step")].call(a,a.val(t),o,l,u),a.setTargetMethodName(r,["on".concat(g,"Step")])):i&&"function"==typeof i.onImperativeStep&&(i.onImperativeStep.call(a,t,a.val(t),o,l,u),a.setTargetMethodName(r,"onImperativeStep")),i&&"function"==typeof i["on".concat(g,"End")]?(i["on".concat(g,"End")].call(a,a.val(t),o,l,u),a.setTargetMethodName(r,["on".concat(g,"End")])):i&&"function"==typeof i.onImperativeEnd&&(i.onImperativeEnd.call(a,t,a.val(t)),a.setTargetMethodName(r,"onImperativeEnd"))):(!n.valueList&&e.getTargetCycle(t)<e.getTargetCycles(t)&&(e.incrementTargetCycle(t,e.getTargetCycle(t)),e.resetTargetStep(t).resetTargetInitialValue(t).resetTargetExecutionFlag(t),H.executeDeclarativeTarget(e,t)),"object"===jt(e.targets[t])&&"function"==typeof e.targets[t].onStepsEnd&&(e.targets[t].onStepsEnd.call(e,c),e.setTargetMethodName(t,"onStepsEnd"))),e.updateTargetStatus(t),p.hasTargetEnded(e,t)&&p.shouldActivateNextTarget(e,t),Qt().schedule(T,"".concat(e.oid,"---").concat(t,"-").concat(l,"/").concat(u,"-").concat(c,"-").concat(T))}else Qt().schedule(10,"setActualValue-disabled-".concat(e.oid,"__").concat(t))}}])}();function Rt(e){return Rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rt(e)}function Yt(){Yt=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var a=t&&t.prototype instanceof p?t:p,o=Object.create(a.prototype),l=new P(r||[]);return i(o,"_invoke",{value:C(e,n,l)}),o}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=c;var d="suspendedStart",f="suspendedYield",v="executing",y="completed",g={};function p(){}function m(){}function b(){}var T={};u(T,o,(function(){return this}));var w=Object.getPrototypeOf,k=w&&w(w(O([])));k&&k!==n&&r.call(k,o)&&(T=k);var S=b.prototype=p.prototype=Object.create(T);function E(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function M(e,t){function n(i,a,o,l){var s=h(e[i],e,a);if("throw"!==s.type){var u=s.arg,c=u.value;return c&&"object"==Rt(c)&&r.call(c,"__await")?t.resolve(c.__await).then((function(e){n("next",e,o,l)}),(function(e){n("throw",e,o,l)})):t.resolve(c).then((function(e){u.value=e,o(u)}),(function(e){return n("throw",e,o,l)}))}l(s.arg)}var a;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return a=a?a.then(i,i):i()}})}function C(t,n,r){var i=d;return function(a,o){if(i===v)throw Error("Generator is already running");if(i===y){if("throw"===a)throw o;return{value:e,done:!0}}for(r.method=a,r.arg=o;;){var l=r.delegate;if(l){var s=x(l,r);if(s){if(s===g)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===d)throw i=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=v;var u=h(t,n,r);if("normal"===u.type){if(i=r.done?y:f,u.arg===g)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i=y,r.method="throw",r.arg=u.arg)}}}function x(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,x(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var a=h(i,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,g;var o=a.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function D(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function O(t){if(t||""===t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(Rt(t)+" is not iterable")}return m.prototype=b,i(S,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:m,configurable:!0}),m.displayName=u(b,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u(e,s,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},E(M.prototype),u(M.prototype,l,(function(){return this})),t.AsyncIterator=M,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var o=new M(c(e,n,r,i),a);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},E(S),u(S,s,"Generator"),u(S,o,(function(){return this})),u(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=O,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(D),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return l.type="throw",l.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],l=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),D(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;D(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:O(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}function Ut(e,t,n,r,i,a,o){try{var l=e[a](o),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,i)}function Bt(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){Ut(a,r,i,o,l,"next",e)}function l(e){Ut(a,r,i,o,l,"throw",e)}o(void 0)}))}}var Xt=function(e){var t,n;t=e,n={throttle:0,debugLevel:0,runningFlag:!1,resizeLastUpdate:0,pageIsEmpty:!1,init:function(){return n.browser=new ke,n.browser.setup(),n.$window=new d(window),n.$window.addEvent("popstate",(function(e){e.state&&Nt.pager.openLinkFromHistory(e.state)})),n.loader=new Ve,n.pager=new vt,n.events=new Le,n.locationManager=new rt,n.targetManager=new Ft,n.manager=new Mt,n.runScheduler=new Ot,n.tRootFactory=function(){var e=new me("tRoot",{start:function(){d.query("#tgjs-root")?this.$dom=new d("#tgjs-root"):(this.$dom=new d,this.$dom.create("div"),this.$dom.setSelector("#tgjs-root"),this.$dom.setId("#tgjs-root"),this.$dom.attr("tabindex","0"),new d("body").insertFirst$Dom(this.$dom))},styling:!1,domHolder:function(){return this.$dom},isVisible:!0,width:function(){var t=d.getScreenWidth();return t!==e.val("width")&&(n.resizeLastUpdate=s.now()),t},height:function(){var t=d.getScreenHeight();return t!==e.val("height")&&(n.resizeLastUpdate=s.now()),t}});return e.oids={},e.val("width",d.getScreenWidth()),e.val("height",d.getScreenHeight()),n.tRoot&&n.tRoot.getChildren().forEach((function(t){var n=new me(t.type,t.targets);e.addChild(n)})),e},n.tRoot=n.tRootFactory(),t&&n.tRoot.addChild(t),window.history.pushState({link:document.URL},"",document.URL),n}},n.start=Bt(Yt().mark((function e(){return Yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.runningFlag=!1,H.executeDeclarativeTarget(n.tRoot,"width"),H.executeDeclarativeTarget(n.tRoot,"height"),n.events.detachAll(),n.events.detachWindowEvents(),n.events.attachWindowEvents(),n.events.clearAll(),n.events.attachEvents(n.manager.lists.visible),e.next=10,n.runScheduler.resetRuns();case 10:return n.runningFlag=!0,n.runScheduler.schedule(0,"appStart"),e.abrupt("return",n);case 13:case"end":return e.stop()}}),e)}))),n.stop=Bt(Yt().mark((function e(){return Yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.runningFlag=!1,n.events.detachAll(),n.events.detachWindowEvents(),n.events.clearAll(),e.next=6,n.runScheduler.resetRuns();case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),n.reset=function(){n.manager.lists.visible.forEach((function(e){e.transformMap={},e.styleMap={},e.allStyleTargetList.forEach((function(t){s.isDefined(e.val(t))&&e.addToStyleTargetList(t)}))})),n.manager.clear(),n.locationManager.clear(),ce.clear()},n.isRunning=function(){return n.runningFlag},n.find=function(e){return ce.find(e)},(Nt=n).init().start()};Xt.oids={},Xt.getOid=function(e){var t=Xt.oids;s.isDefined(t[e])||(t[e]=0);var n=t[e]++;return{oid:n>0||e.endsWith("_")?"".concat(e).concat(n):e,num:n}};var $t=function(){return!!Nt&&Nt.runningFlag},Wt=function(){var e;return null===(e=Nt)||void 0===e?void 0:e.tRoot},_t=function(){var e;return null===(e=Nt)||void 0===e?void 0:e.events},qt=function(){var e;return null===(e=Nt)||void 0===e?void 0:e.pager},zt=function(){var e;return null===(e=Nt)||void 0===e?void 0:e.loader},Kt=function(e,t,n,r){var i;return null===(i=Nt)||void 0===i||null===(i=i.loader)||void 0===i?void 0:i.fetch(e,t,n,r)},Zt=function(e,t,n){var r;return null===(r=Nt)||void 0===r||null===(r=r.loader)||void 0===r?void 0:r.fetchImage(e,t,n)},Gt=function(){var e;return null===(e=Nt)||void 0===e?void 0:e.manager},Qt=function(){var e;return null===(e=Nt)||void 0===e?void 0:e.runScheduler},Jt=function(){var e;return null===(e=Nt)||void 0===e?void 0:e.locationManager},en=function(){var e;return null===(e=Nt)||void 0===e?void 0:e.browser},tn=function(){var e,t;return null!==(e=null===(t=Nt)||void 0===t||null===(t=t.tRoot)||void 0===t?void 0:t.getWidth())&&void 0!==e?e:0},nn=function(){var e,t;return null!==(e=null===(t=Nt)||void 0===t||null===(t=t.tRoot)||void 0===t?void 0:t.getHeight())&&void 0!==e?e:0},rn=function(){var e;return null===(e=Nt)||void 0===e||null===(e=e.manager)||void 0===e?void 0:e.lists.visible},an=function(){var e;return null===(e=Nt)||void 0===e?void 0:e.resizeLastUpdate};function on(e){return on="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},on(e)}function ln(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,sn(r.key),r)}}function sn(e){var t=function(e){if("object"!=on(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=on(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==on(t)?t:t+""}window.t=window.t||ce.find;var un=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return function(e,t,n){return n&&ln(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(e,0,[{key:"bounce",value:function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.yStart,i=void 0===r?void 0:r,a=n.xStart,o=void 0===a?tn()/2:a,l=n.widthStart,u=void 0===l?50:l,c=n.heightStart,h=void 0===c?50:c,d=n.bFactor,f=void 0===d?.6:d,v=n.cFactor,y=void 0===v?.2:v,g=n.rotationStart,p=void 0===g?0:g,m=n.rIncrement,b=void 0===m?360:m,T=Math.max(10,(t-e)*f),w=s.isDefined(i)?[i,e]:[e],k=[o],S=[u],E=[h],M=[p];Math.abs(0|T)>1;){w.push(t),w.push(t-T);var C=u*(1+y),x=h*(1-y);S.push(C),S.push(u),E.push(x),E.push(h),k.push(o-(C-u)/2),k.push(o),M.push(M[M.length-1]+b),T*=f,b*=.8,y*=f}k.push(o),w.push(t),S.push(u),E.push(h);var L=M[M.length-1]%360;return L>0&&L<360&&M.push(360),{x:{list:k},y:{list:w},width:{list:S},height:{list:E},rotate:{list:M}}}},{key:"bounceSimple",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.from,i=void 0===r?void 0:r,a=n.to,o=void 0===a?void 0:a,l=n.widthStart,u=void 0===l?void 0:l,c=n.heightStart,h=void 0===c?void 0:c,d=n.xStart,f=void 0===d?void 0:d,v=n.yStart,y=void 0===v?void 0:v,g=n.bFactor,p=void 0===g?.7:g,m=n.cFactor,b=void 0===m?.2:m;return i=s.isDefined(i)?i:t.getY(),o=s.isDefined(o)?o:t.getY(),u=s.isDefined(u)?u:t.getWidth(),h=s.isDefined(h)?h:t.getHeight(),y=s.isDefined(y)?y:t.getY(),f=s.isDefined(f)?f:t.getX(),e.bounce(i,o,{yStart:y,xStart:f,widthStart:u,heightStart:h,bFactor:p,cFactor:b,rIncrement:0})}},{key:"shake",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.bFactor,i=void 0===r?.6:r,a=n.cFactor,o=void 0===a?.3:a,l=n.strength,s=void 0===l?20:l;if(!e.shakeMap[t.oid]){var u=(t.getParentValue("width")-t.getWidth())/2,c=t.getY(),h=t.getWidth(),d=t.getHeight();e.shakeMap[t.oid]={xStart:u,yStart:c,widthStart:h,heightStart:d}}var f=e.shakeMap[t.oid],v=f.xStart,y=f.yStart,g=f.widthStart,p=f.heightStart,m=e.bounce(y-s,y,{xStart:v,widthStart:g,heightStart:p,bFactor:i,cFactor:o});return{y:{list:m.height.list.map((function(e){return y-(e-p)/2}))},x:m.x,width:m.width,height:m.height}}},{key:"spiral",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.startAngle,n=void 0===t?0:t,r=e.endAngle,i=void 0===r?360:r,a=e.angleStep,o=void 0===a?18:a,l=e.x,s=void 0===l?0:l,u=e.y,c=void 0===u?0:u,h=e.width,d=void 0===h?100:h,f=e.height,v=void 0===f?100:f,y=[],g=[],p=[],m=n;m<=i;m+=o){var b=m*(Math.PI/180);y.push(Math.floor(s+d*Math.cos(b))),g.push(Math.floor(c+v*Math.sin(b))),p.push(90+m)}return{x:{list:y},y:{list:g},rotate:{list:p}}}}])}();!function(e,t,n){(t=sn(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(un,"shakeMap",{}),window.TargetJS=t}();